<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MariaDB for Universities Program: Course Material</title>
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
    
    <div class="top-menu">
        <div class="menu-left">
            <a href="/" class="home-link">
                <img src="#" alt="" class="menu-icon">
                MariaDB for Universities Program: Course Material
            </a>
        </div>
        <div class="menu-right">
            <a href="/">Course Material</a>
            <a href="/contribute">Contribute</a>
            <a href="/foundation">MariaDB Foundation</a>
        </div>
    </div>

  

    
    <div class="content-wrapper">
      
      <div class="left-menu">
        
        <div class="table-of-contents">
          <h2><a href=".">Lesson 2: Schema Objects</a></h2>
          <nav id="TableOfContents">
  <ul>
    <li><a href="#learning-objectives">Learning Objectives</a>
      <ul>
        <li><a href="#collations-and-character-sets">Collations and Character Sets</a></li>
        <li><a href="#listing-character-sets">Listing Character Sets</a></li>
        <li><a href="#listing-collations">Listing Collations</a></li>
      </ul>
    </li>
    <li><a href="#databases-tables-and-default-schemas">Databases, Tables, and Default Schemas</a>
      <ul>
        <li><a href="#case-sensitivity">Case Sensitivity</a></li>
        <li><a href="#databases">Databases</a></li>
        <li><a href="#tables">Tables</a></li>
        <li><a href="#columns">Columns</a></li>
        <li><a href="#indexes">Indexes</a></li>
        <li><a href="#constraints">Constraints</a></li>
        <li><a href="#column-attributes">Column Attributes</a></li>
        <li><a href="#views">Views</a></li>
        <li><a href="#using-views">Using Views</a></li>
        <li><a href="#stored-routines">Stored Routines</a></li>
        <li><a href="#creating-your-first-table">Creating Your First Table</a></li>
        <li><a href="#altering-tables">Altering Tables</a></li>
        <li><a href="#temporal-tables">Temporal Tables</a></li>
        <li><a href="#temporal-tables-1">Temporal Tables</a></li>
        <li><a href="#default-schemas">Default Schemas</a></li>
        <li><a href="#default-schemas-1">Default Schemas</a></li>
        <li><a href="#information-schema-details">Information Schema Details</a></li>
        <li><a href="#methods-of-accessing-the-information-schema">Methods of Accessing the Information Schema</a></li>
        <li><a href="#crash-safe-system-tables">Crash Safe System Tables</a></li>
      </ul>
    </li>
    <li><a href="#data-types">Data Types</a>
      <ul>
        <li><a href="#data-types-1">Data Types</a></li>
        <li><a href="#numeric-data-types">Numeric Data Types</a></li>
        <li><a href="#auto_increment">AUTO_INCREMENT</a></li>
        <li><a href="#numeric-data-types-1">Numeric Data Types</a></li>
        <li><a href="#string-data-types">String Data Types</a></li>
        <li><a href="#string-data-types-1">String Data Types</a></li>
        <li><a href="#binary-data-types">Binary Data Types</a></li>
        <li><a href="#temporal-data-types">Temporal Data Types</a></li>
        <li><a href="#json-data-type">JSON Data Type</a></li>
        <li><a href="#special-data-types">Special Data Types</a></li>
        <li><a href="#special-data-types-1">Special Data Types</a></li>
      </ul>
    </li>
    <li><a href="#built-in-functions">Built-in Functions</a>
      <ul>
        <li><a href="#manipulating-date-and-time">Manipulating Date and Time</a></li>
        <li><a href="#examples-of-date-and-time-functions">Examples of Date and Time Functions</a></li>
        <li><a href="#manipulating-strings">Manipulating Strings</a></li>
        <li><a href="#an-example-of-a-string-function">An Example of a String Function</a></li>
        <li><a href="#working-with-the-json-data-type">Working with the JSON Data Type</a></li>
        <li><a href="#examples-of-json-functions">Examples of JSON Functions</a></li>
        <li><a href="#examples-of-json-functions-1">Examples of JSON Functions</a></li>
        <li><a href="#examples-of-json-functions-2">Examples of JSON Functions</a></li>
      </ul>
    </li>
    <li><a href="#lesson-summary">Lesson Summary</a></li>
  </ul>
</nav>
        </div>
        
      </div>

      
      <div class="main-content">
        
<nav class="breadcrumb">
    
      
      <a href="/">MariaDB for Universities Course Material</a>
    
       &gt; 
      <a href="/dba/">MariaDB DBA Course</a>
    
    &gt; <span class="current">Lesson 2: Schema Objects</span>
</nav>

        <h1>Lesson 2: Schema Objects</h1>
        <h1 id="schema-objects">Schema Objects</h1>
<h2 id="learning-objectives">Learning Objectives</h2>
<ul>
<li>Identify and describe the schema objects available within MariaDB Enterprise Server</li>
<li>Demonstrate how to create and use databases, tables, and columns in MariaDB Enterprise Server</li>
<li>Compare and contrast the data types and built-in functions in MariaDB Enterprise Server, and explain their use cases</li>
</ul>
<h3 id="collations-and-character-sets">Collations and Character Sets</h3>
<ul>
<li>
<p>A collation is a set of rules that defines how to compare and sort strings</p>
</li>
<li>
<p>A character set defines how and which characters are stored to support a particular language or languages</p>
</li>
<li>
<p>Only applicable to text fields such as <code>VARCHAR</code> or <code>TEXT</code></p>
</li>
<li>
<p>The default character set is <code>latin1</code> and the default collation is <code>latin1_swedish_ci</code></p>
</li>
<li>
<p>Collation and character set are specified at table or column level</p>
</li>
</ul>
<h3 id="listing-character-sets">Listing Character Sets</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>MariaDB [(<span style="color:#66d9ef">none</span>)]<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SHOW</span> CHARACTER <span style="color:#66d9ef">SET</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> Charset <span style="color:#f92672">|</span> Description                 <span style="color:#f92672">|</span> <span style="color:#66d9ef">Default</span> <span style="color:#66d9ef">collation</span> <span style="color:#f92672">|</span> Maxlen <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span><span style="color:#75715e">---------|-----------------------------|-------------------|--------|
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> big5    <span style="color:#f92672">|</span> Big5 Traditional Chinese    <span style="color:#f92672">|</span> big5_chinese_ci   <span style="color:#f92672">|</span> <span style="color:#ae81ff">2</span>      <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> dec8    <span style="color:#f92672">|</span> DEC West European           <span style="color:#f92672">|</span> dec8_swedish_ci   <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>      <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> cp850   <span style="color:#f92672">|</span> DOS West European           <span style="color:#f92672">|</span> cp850_general_ci  <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>      <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> hp8     <span style="color:#f92672">|</span> HP West European            <span style="color:#f92672">|</span> hp8_english_ci    <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>      <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> koi8r   <span style="color:#f92672">|</span> KOI8<span style="color:#f92672">-</span>R Relcom Russian       <span style="color:#f92672">|</span> koi8r_general_ci  <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>      <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> latin1  <span style="color:#f92672">|</span> cp1252 West European        <span style="color:#f92672">|</span> latin1_swedish_ci <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>      <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> latin2  <span style="color:#f92672">|</span> ISO <span style="color:#ae81ff">8859</span><span style="color:#f92672">-</span><span style="color:#ae81ff">2</span> Central European <span style="color:#f92672">|</span> latin2_general_ci <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>      <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> swe7    <span style="color:#f92672">|</span> <span style="color:#ae81ff">7</span>bit Swedish                <span style="color:#f92672">|</span> swe7_swedish_ci   <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>      <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> ascii   <span style="color:#f92672">|</span> US ASCII                    <span style="color:#f92672">|</span> ascii_general_ci  <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>      <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>[...]
</span></span></code></pre></div><h3 id="listing-collations">Listing Collations</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>MariaDB [(<span style="color:#66d9ef">none</span>)]<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SHOW</span> <span style="color:#66d9ef">COLLATION</span> <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;utf8%&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">-----------------------+---------+-----+---------+----------+---------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> <span style="color:#66d9ef">Collation</span>             <span style="color:#f92672">|</span> Charset <span style="color:#f92672">|</span> Id  <span style="color:#f92672">|</span> <span style="color:#66d9ef">Default</span> <span style="color:#f92672">|</span> Compiled <span style="color:#f92672">|</span> Sortlen <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">-----------------------+---------+-----+---------+----------+---------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> utf8mb3_general_ci    <span style="color:#f92672">|</span> utf8mb3 <span style="color:#f92672">|</span>  <span style="color:#ae81ff">33</span> <span style="color:#f92672">|</span>    Yes  <span style="color:#f92672">|</span>    Yes   <span style="color:#f92672">|</span>       <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> utf8mb3_bin           <span style="color:#f92672">|</span> utf8mb3 <span style="color:#f92672">|</span>  <span style="color:#ae81ff">83</span> <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>    Yes   <span style="color:#f92672">|</span>       <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> utf8mb3_unicode_ci    <span style="color:#f92672">|</span> utf8mb3 <span style="color:#f92672">|</span> <span style="color:#ae81ff">192</span> <span style="color:#f92672">|</span>    Yes  <span style="color:#f92672">|</span>    Yes   <span style="color:#f92672">|</span>       <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> utf8mb3_icelandic_ci  <span style="color:#f92672">|</span> utf8mb3 <span style="color:#f92672">|</span> <span style="color:#ae81ff">193</span> <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>    Yes   <span style="color:#f92672">|</span>       <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> utf8mb3_latvian_ci    <span style="color:#f92672">|</span> utf8mb3 <span style="color:#f92672">|</span> <span style="color:#ae81ff">194</span> <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>    Yes   <span style="color:#f92672">|</span>       <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> utf8mb3_romanian_ci   <span style="color:#f92672">|</span> utf8mb3 <span style="color:#f92672">|</span> <span style="color:#ae81ff">195</span> <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>    Yes   <span style="color:#f92672">|</span>       <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> utf8mb3_slovenian_ci  <span style="color:#f92672">|</span> utf8mb3 <span style="color:#f92672">|</span> <span style="color:#ae81ff">196</span> <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>    Yes   <span style="color:#f92672">|</span>       <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> utf8mb3_polish_ci     <span style="color:#f92672">|</span> utf8mb3 <span style="color:#f92672">|</span> <span style="color:#ae81ff">197</span> <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>    Yes   <span style="color:#f92672">|</span>       <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> utf8mb3_estonian_ci   <span style="color:#f92672">|</span> utf8mb3 <span style="color:#f92672">|</span> <span style="color:#ae81ff">198</span> <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>    Yes   <span style="color:#f92672">|</span>       <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> utf8mb3_spanish_ci    <span style="color:#f92672">|</span> utf8mb3 <span style="color:#f92672">|</span> <span style="color:#ae81ff">199</span> <span style="color:#f92672">|</span>         <span style="color:#f92672">|</span>    Yes   <span style="color:#f92672">|</span>       <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">-----------------------+---------+-----+---------+----------+---------+
</span></span></span></code></pre></div><h2 id="databases-tables-and-default-schemas">Databases, Tables, and Default Schemas</h2>
<h3 id="case-sensitivity">Case Sensitivity</h3>
<p>Depends on operating system, file system and <code>lower_case_table_names</code> configuration</p>
<p>Set before starting a project (strongly recommended!)</p>
<p>Usually case sensitive by default on Linux, but not on Windows and MacOS</p>
<p>Adopt a convention such as always creating and referring to databases and tables using lowercase names</p>
<p>Most are limited to 64 characters</p>
<h3 id="databases">Databases</h3>
<p><strong>Database aka Schema</strong></p>
<p>Highest level object</p>
<p>Corresponds to a directory within the data directory</p>
<p>All other objects reside within user-created databases however certain objects such as user accounts, roles, stored procedures and plugins reside within system databases.</p>
<p><code>CREATE DATABASE world;</code></p>
<h3 id="tables">Tables</h3>
<ul>
<li>
<p>Stores rows of structured data organized by typed columns</p>
</li>
<li>
<p>Each corresponds to a metadata file (<code>.frm</code>) and data file(s), dependent on the storage engine<br>
<em>(i.e. InnoDB tablespaces)</em></p>
</li>
<li>
<p>Qualified by a database name<br>
<em>(i.e. database.table)</em></p>
</li>
</ul>
<h3 id="columns">Columns</h3>
<p>Set of typed data values</p>
<p>Qualified by a table name<br>
(i.e. table.column)</p>
<p>Stored together in each row (MariaDB Server) within pages, within tablespaces or data files</p>
<p>Generated columns are stored if they are created as <code>PERSISTENT</code> | <code>STORED</code> though <code>VIRTUAL</code> columns are not stored</p>
<p>Index</p>
<h3 id="indexes">Indexes</h3>
<ul>
<li>Exact copy of selected columns followed by primary key (e.g., name, address, ID)
<ul>
<li>For long columns the index might not be an &ldquo;exact copy&rdquo;, but instead it might contain a prefix of the column</li>
</ul>
</li>
<li>Fast lookup of data within a table without having to scan all columns for each row</li>
<li>For InnoDB the primary key is silently appended to the end of secondary indexes, unless specified elsewhere within an index</li>
<li>Attribute of a table</li>
</ul>
<h3 id="constraints">Constraints</h3>
<ul>
<li>Types: Primary Key, Foreign Key, Unique, and Check</li>
<li>Support and implementation differs per storage engine</li>
<li>Allows data within column(s) to be limited or constrained to a set of values</li>
<li>Usually defined with a corresponding index</li>
<li>Attribute of a table</li>
<li>Has potential for contention at scale</li>
</ul>
<h3 id="column-attributes">Column Attributes</h3>
<p>Columns have strict type definitions</p>
<p>Can specify DEFAULT value for column</p>
<p>Only the primary key can be automatically incremented</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> people
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(id INT AUTO_INCREMENT <span style="color:#66d9ef">KEY</span>,
</span></span><span style="display:flex;"><span>   name VARCHAR(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;unknown&#39;</span>);
</span></span></code></pre></div><p>Columns can be NULL, unless defined NOT NULL</p>
<ul>
<li>NULL means &ldquo;No Value&rdquo;, &ldquo;Not Applicable&rdquo;, or &ldquo;Unknown&rdquo;</li>
<li>Use NULL when value is not an empty string</li>
<li>NOT NULL
<ul>
<li>Reduces storage in some storage engines</li>
<li>Can also reduce execution time because there are more CPU cycles used to first check for NULL</li>
</ul>
</li>
</ul>
<h3 id="views">Views</h3>
<ul>
<li>Virtual table defined by a SQL <code>SELECT</code> query</li>
<li>Evaluated at each access
<ul>
<li>No materialized views</li>
</ul>
</li>
<li>Treated as a table for many purposes, shares namespace with tables</li>
<li>Updateable in certain cases (<code>WITH CHECK OPTION</code>)</li>
<li>Qualified by a database (<code>database.view</code>)</li>
</ul>
<h3 id="using-views">Using Views</h3>
<p>Customers Table</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">|</span> ID <span style="color:#f92672">|</span> FirstName <span style="color:#f92672">|</span> LastName <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span><span style="color:#75715e">----|-----------|----------|
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>  <span style="color:#f92672">|</span> Alice     <span style="color:#f92672">|</span> Evans    <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">2</span>  <span style="color:#f92672">|</span> Bob       <span style="color:#f92672">|</span> Smith    <span style="color:#f92672">|</span>
</span></span></code></pre></div><p>Addresses Table</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">|</span> CustomerID <span style="color:#f92672">|</span> Address1        <span style="color:#f92672">|</span> City     <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span><span style="color:#75715e">------------|-----------------|----------|
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>          <span style="color:#f92672">|</span> <span style="color:#ae81ff">123</span> Main Street <span style="color:#f92672">|</span> Anytown  <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">2</span>          <span style="color:#f92672">|</span> <span style="color:#ae81ff">456</span> Spruce Street <span style="color:#f92672">|</span> Anyburg <span style="color:#f92672">|</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">VIEW</span> CustomerAddresses <span style="color:#66d9ef">AS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>    CONCAT(<span style="color:#66d9ef">c</span>.FirstName, <span style="color:#e6db74">&#39; &#39;</span>, <span style="color:#66d9ef">c</span>.LastName) <span style="color:#66d9ef">as</span> FullName,
</span></span><span style="display:flex;"><span>    CONCAT(a.Address1, <span style="color:#e6db74">&#39;, &#39;</span>, a.City) <span style="color:#66d9ef">as</span> FullAddress
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> Customers <span style="color:#66d9ef">c</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> Addresses a <span style="color:#66d9ef">ON</span> <span style="color:#66d9ef">c</span>.id <span style="color:#f92672">=</span> a.CustomerId;
</span></span></code></pre></div><p>CustomerAddresses View</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">|</span> FullName    <span style="color:#f92672">|</span> FullAddress             <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span><span style="color:#75715e">-------------|-------------------------|
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Alice Evans <span style="color:#f92672">|</span> <span style="color:#ae81ff">123</span> Main Street, Anytown<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> Bob Smith   <span style="color:#f92672">|</span> <span style="color:#ae81ff">456</span> Spruce Street, Anyburg<span style="color:#f92672">|</span>
</span></span></code></pre></div><h3 id="stored-routines">Stored Routines</h3>
<ul>
<li>Types: Functions, Triggers, Events, and Stored Procedures</li>
<li>Has input and output parameters</li>
<li>Reusable SQL Code
<ul>
<li>SQL/PSM (default)</li>
<li>SQL/PL which is a compatible subset of PL/SQL (<code>sql_mode=ORACLE</code>)</li>
</ul>
</li>
<li>Can allow cursor loops</li>
<li>Runtime script, not compiled or binary</li>
<li>Lack of good debugging, can be hard to profile</li>
<li>Can be bad for statement based binary logging</li>
<li>Stored routine uses the privileges of the user that defined it (user can be changed with the <code>DEFINER</code> clause)</li>
<li>If <code>SQL SECURITY INVOKER</code> is set then the privileges of the user executing the stored routine are used</li>
<li>Qualified by database (<code>database.my_stored_procedure</code>)</li>
</ul>
<h3 id="creating-your-first-table">Creating Your First Table</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> city (
</span></span><span style="display:flex;"><span>    ID INT(<span style="color:#ae81ff">11</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> AUTO_INCREMENT,
</span></span><span style="display:flex;"><span>    Name CHAR(<span style="color:#ae81ff">35</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;&#39;</span>,
</span></span><span style="display:flex;"><span>    CountryCode CHAR(<span style="color:#ae81ff">3</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;&#39;</span>,
</span></span><span style="display:flex;"><span>    District CHAR(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;&#39;</span>,
</span></span><span style="display:flex;"><span>    Population INT(<span style="color:#ae81ff">11</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;0&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (ID),
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">KEY</span> CountryCode (CountryCode),
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">CONSTRAINT</span> <span style="color:#66d9ef">FOREIGN</span> <span style="color:#66d9ef">KEY</span> (CountryCode)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">REFERENCES</span> country (Code)
</span></span><span style="display:flex;"><span>) ENGINE<span style="color:#f92672">=</span>InnoDB <span style="color:#66d9ef">DEFAULT</span> CHARSET<span style="color:#f92672">=</span>utf8;
</span></span></code></pre></div><ul>
<li>Name and type of object being created</li>
<li>Column definitions</li>
<li>Define primary key, secondary indexes and constraints</li>
<li>Define engine, partitions, character set and other attributes</li>
</ul>
<h3 id="altering-tables">Altering Tables</h3>
<p><code>ALTER TABLE</code> IS USED TO CHANGE A TABLE&rsquo;S SCHEMA</p>
<p><strong>ADD COLUMN</strong> to add a column</p>
<p><strong>DROP COLUMN</strong> to drop a column <em>(deletes data!)</em></p>
<p><strong>CHANGE COLUMN</strong> and <strong>MODIFY COLUMN</strong> to alter a column</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> table1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ADD</span> <span style="color:#66d9ef">COLUMN</span> col5 CHAR(<span style="color:#ae81ff">8</span>),
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">COLUMN</span> col3,
</span></span><span style="display:flex;"><span>CHANGE <span style="color:#66d9ef">COLUMN</span> col4 col6 DATE,  <span style="color:#f92672">#</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">column</span> name col6
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">MODIFY</span> <span style="color:#66d9ef">COLUMN</span> col8 VARCHAR(<span style="color:#ae81ff">10</span>);
</span></span></code></pre></div><p>Basic syntax example for <code>ALTER TABLE</code> statement</p>
<h3 id="temporal-tables">Temporal Tables</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">Type</span>                   <span style="color:#f92672">|</span> Tracks                          <span style="color:#f92672">|</span> Sample Use Cases                         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span><span style="color:#75715e">------------------------|---------------------------------|------------------------------------------|
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> <span style="color:#66d9ef">System</span><span style="color:#f92672">-</span>Versioned       <span style="color:#f92672">|</span> Change history                  <span style="color:#f92672">|</span> Audit, forensics, IoT temperature tracking <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> Application<span style="color:#f92672">-</span>Time Period<span style="color:#f92672">|</span> Time<span style="color:#f92672">-</span>limited <span style="color:#66d9ef">values</span>             <span style="color:#f92672">|</span> Sales offers, subscriptions              <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> Bitemporal             <span style="color:#f92672">|</span> Time<span style="color:#f92672">-</span>limited <span style="color:#66d9ef">values</span> <span style="color:#66d9ef">with</span> history<span style="color:#f92672">|</span> Schedules, decision support models       <span style="color:#f92672">|</span>
</span></span></code></pre></div><p><em>mariadb-dump</em> does not read historical rows from versioned tables, and so historical data will not be backed up.</p>
<h3 id="temporal-tables-1">Temporal Tables</h3>
<h4 id="system-versioned-example">System-Versioned Example</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> accounts (
</span></span><span style="display:flex;"><span>    id INT <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> AUTO_INCREMENT,
</span></span><span style="display:flex;"><span>    name VARCHAR(<span style="color:#ae81ff">255</span>),
</span></span><span style="display:flex;"><span>    amount INT
</span></span><span style="display:flex;"><span>) <span style="color:#66d9ef">WITH</span> <span style="color:#66d9ef">SYSTEM</span> VERSIONING;
</span></span></code></pre></div><h4 id="application-time-period-example">Application-Time Period Example</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> coupons (
</span></span><span style="display:flex;"><span>    id INT UNSIGNED,
</span></span><span style="display:flex;"><span>    date_start DATE,
</span></span><span style="display:flex;"><span>    date_end DATE,
</span></span><span style="display:flex;"><span>    PERIOD <span style="color:#66d9ef">FOR</span> valid_period(date_start, date_end)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h4 id="bitemporal-example">Bitemporal Example</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> coupons_new (
</span></span><span style="display:flex;"><span>    id INT UNSIGNED,
</span></span><span style="display:flex;"><span>    name VARCHAR(<span style="color:#ae81ff">255</span>),
</span></span><span style="display:flex;"><span>    date_start DATE,
</span></span><span style="display:flex;"><span>    date_end DATE,
</span></span><span style="display:flex;"><span>    PERIOD <span style="color:#66d9ef">FOR</span> valid_period(date_start, date_end)
</span></span><span style="display:flex;"><span>) <span style="color:#66d9ef">WITH</span> <span style="color:#66d9ef">SYSTEM</span> VERSIONING;
</span></span></code></pre></div><h3 id="default-schemas">Default Schemas</h3>
<h4 id="information_schema">information_schema</h4>
<ul>
<li>The encyclopedia of your database</li>
<li>Contains information on databases, tables, columns, procedures, indexes, statistics, partitions and views</li>
<li>Plugins can install additional information_schema tables</li>
<li>Thread pool information tables</li>
<li>Keyword and SQL functions</li>
</ul>
<h4 id="mysql">mysql</h4>
<p>Stores information on:</p>
<ul>
<li>Server configuration</li>
<li>Grants and timezones</li>
<li>User accounts</li>
<li>Roles</li>
<li>Stored procedure definitions</li>
<li>Stored function definitions</li>
<li>Event definitions</li>
<li>Plugins installed by <code>INSTALL SONAME</code>/<code>INSTALL PLUGIN</code></li>
</ul>
<h4 id="performance_schema">performance_schema</h4>
<ul>
<li>Metrics and performance data</li>
<li>Covered in detail in our Performance Tuning class</li>
</ul>
<h3 id="default-schemas-1">Default Schemas</h3>
<h4 id="sys_schema"><code>sys_schema</code></h4>
<ul>
<li>Added in MariaDB 10.6</li>
<li>Tracks configuration changes in <code>sys_config</code> table</li>
<li>Has views, functions, and stored procedures for getting detailed metrics</li>
</ul>
<h3 id="information-schema-details">Information Schema Details</h3>
<ul>
<li>Pseudo database that holds metadata on schemas</li>
<li>Generated as needed</li>
<li>No on-disk presence</li>
<li>Read-only tables</li>
<li>Plugins can install additional information schema tables (e.g. <code>METADATA_LOCK_INFO</code>)</li>
<li>Useful for schema design, redesign and migration</li>
<li>Provides much more information than <code>SHOW</code> statements and is ANSI/ISO SQL:2003</li>
<li>Do NOT automate queries in production as this can affect performance</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>  CHARACTER_SETS  
</span></span><span style="display:flex;"><span>  COLLATION_CHARACTER_SET_APP  
</span></span><span style="display:flex;"><span>  LICABILITY  
</span></span><span style="display:flex;"><span>  COLLATIONS  
</span></span><span style="display:flex;"><span>  COLUMN_PRIVILEGES  
</span></span><span style="display:flex;"><span>  COLUMNS  
</span></span><span style="display:flex;"><span>  ENGINES  
</span></span><span style="display:flex;"><span>  EVENTS  
</span></span><span style="display:flex;"><span>  FILES  
</span></span><span style="display:flex;"><span>  GLOBAL_STATUS  
</span></span><span style="display:flex;"><span>  GLOBAL_VARIABLES  
</span></span><span style="display:flex;"><span>  KEY_COLUMN_USAGE  
</span></span><span style="display:flex;"><span>  PARTITIONS  
</span></span><span style="display:flex;"><span>  PLUGINS  
</span></span><span style="display:flex;"><span>  PLUGINS  
</span></span><span style="display:flex;"><span>  PROCESSLIST SCHEMATA  
</span></span><span style="display:flex;"><span>  PROFILING  
</span></span><span style="display:flex;"><span>  REFERENTIAL_CONSTRAINTS  
</span></span><span style="display:flex;"><span>  ROUTINES  
</span></span><span style="display:flex;"><span>  SCHEMA_PRIVILEGES  
</span></span><span style="display:flex;"><span>  SESSION_STATUS  
</span></span><span style="display:flex;"><span>  SESSION_VARIABLES  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">STATISTICS</span>  
</span></span><span style="display:flex;"><span>  TABLE_CONSTRAINTS  
</span></span><span style="display:flex;"><span>  TABLE_PRIVILEGES  
</span></span><span style="display:flex;"><span>  TABLES  
</span></span><span style="display:flex;"><span>  TRIGGERS  
</span></span><span style="display:flex;"><span>  USER_PRIVILEGES  
</span></span><span style="display:flex;"><span>  VIEWS  
</span></span></code></pre></div><h3 id="methods-of-accessing-the-information-schema">Methods of Accessing the Information Schema</h3>
<h4 id="accessing-directly">Accessing Directly</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> TABLE_SCHEMA,ENGINE,<span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">FROM</span> INFORMATION_SCHEMA.TABLES <span style="color:#66d9ef">WHERE</span> TABLE_SCHEMA <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">IN</span>(<span style="color:#e6db74">&#39;mysql&#39;</span>,<span style="color:#e6db74">&#39;information_schema&#39;</span>,<span style="color:#e6db74">&#39;performance_schema&#39;</span>) <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> TABLE_SCHEMA,ENGINE;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> information_schema.global_status <span style="color:#66d9ef">WHERE</span> VARIABLE_NAME <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;%qcache%&#39;</span>;
</span></span></code></pre></div><h4 id="using-show-statements">Using Show Statements</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SHOW</span> STATUS <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;%qcache%&#39;</span>;
</span></span></code></pre></div><h3 id="crash-safe-system-tables">Crash Safe System Tables</h3>
<h4 id="mysql-schema">mysql Schema</h4>
<p><code>SELECT ENGINE, TABLE_NAME FROM information_schema.tables WHERE TABLE_SCHEMA=&quot;mysql&quot;;</code></p>
<ul>
<li>Most system tables will show an ENGINE of ARIA</li>
<li>However some system tables will show an ENGINE as CSV
<ul>
<li><code>slow_log</code></li>
<li><code>general_log</code></li>
</ul>
</li>
<li>Some INNODB related tables will remain INNODB tables
<ul>
<li><code>mysql.gtid_slave_pos</code></li>
<li><code>mysql.innodb_index_stats</code></li>
<li><code>mysql.innodb_table_stats</code></li>
<li><code>mysql.transaction_registry</code></li>
</ul>
</li>
</ul>
<h2 id="data-types">Data Types</h2>
<h3 id="data-types-1">Data Types</h3>
<p>Types: Binary, Numeric, String, Temporal, and User Defined</p>
<p>Use the most suitable data type to store all possible, required values<br>
Will truncate silently and round depending on <code>sql_mode</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>MariaDB [(<span style="color:#66d9ef">none</span>)]<span style="color:#f92672">&gt;</span> help INT;
</span></span><span style="display:flex;"><span>Name: <span style="color:#e6db74">&#39;INT&#39;</span>
</span></span><span style="display:flex;"><span>Description: INT[(M)] [UNSIGNED] [ZEROFILL]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>A normal<span style="color:#f92672">-</span><span style="color:#66d9ef">size</span> integer. 
</span></span><span style="display:flex;"><span>The signed range <span style="color:#66d9ef">is</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">147</span>,<span style="color:#ae81ff">483</span>,<span style="color:#ae81ff">648</span> <span style="color:#66d9ef">to</span> <span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">147</span>,<span style="color:#ae81ff">483</span>,<span style="color:#ae81ff">647</span>.
</span></span><span style="display:flex;"><span>The unsigned range <span style="color:#66d9ef">is</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">to</span> <span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">294</span>,<span style="color:#ae81ff">967</span>,<span style="color:#ae81ff">295</span>.
</span></span></code></pre></div><h3 id="numeric-data-types">Numeric Data Types</h3>
<ul>
<li>
<p>TINYINT</p>
</li>
<li>
<p>SMALLINT</p>
</li>
<li>
<p>MEDIUMINT</p>
</li>
<li>
<p>INTEGER,INT</p>
</li>
<li>
<p>BIGINT</p>
</li>
<li>
<p>Use <code>UNSIGNED</code> when appropriate</p>
</li>
<li>
<p><code>INT(n)</code> specifies display precision, not storage precision</p>
</li>
<li>
<p>Size and precision is storage engine dependent</p>
</li>
<li>
<p>Define handling of out-of-range values with <code>sql_mode</code></p>
<ul>
<li>Default Mode: values are truncated silently</li>
<li>Strict Mode: errors are generated</li>
</ul>
</li>
<li>
<p><code>BIGINT</code> can enumerate more than all the ants on Earth and shouldn’t be your default choice</p>
</li>
<li>
<p><code>TINYINT(1)</code> is used for <code>BOOLEAN</code> values and is aliased by the <code>BOOLEAN</code> type</p>
</li>
</ul>
<h3 id="auto_increment">AUTO_INCREMENT</h3>
<ul>
<li>Use <code>LAST_INSERT_ID()</code> to obtain the value generated for the client connection</li>
<li><code>SERIAL</code> is a synonym for <code>BIGINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE</code></li>
<li>In Aria the counter can be set back manually if the counter value wraps</li>
<li>InnoDB prepares <code>AUTO_INCREMENT</code> counters when MariaDB Server starts
<ul>
<li>Single mutex on a table, behavior changed with <code>innodb_autoinc_lock_mode</code></li>
</ul>
</li>
</ul>
<table>
  <thead>
      <tr>
          <th>0</th>
          <th>1</th>
          <th>2</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Traditional</strong></td>
          <td><strong>Consecutive</strong></td>
          <td><strong>Interleaved</strong></td>
      </tr>
      <tr>
          <td>default</td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>Holds table-level lock for all <code>INSERT</code>s until end of statement</td>
          <td>Holds table-level lock for all bulk <code>INSERT</code>s (such as <code>LOAD DATA</code> or <code>INSERT ... SELECT</code>) until end of statement</td>
          <td>No table-level locks are held ever</td>
      </tr>
      <tr>
          <td></td>
          <td>For simple <code>INSERT</code>s, no table-level lock held</td>
          <td>Fastest and most scalable</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
          <td>Not safe for statement-based replication</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
          <td>Generated IDs are not always consecutive</td>
      </tr>
  </tbody>
</table>
<h3 id="numeric-data-types-1">Numeric Data Types</h3>
<ul>
<li>
<p>FLOAT</p>
</li>
<li>
<p>DOUBLE</p>
</li>
<li>
<p>DECIMAL</p>
</li>
<li>
<p>NUMERIC</p>
</li>
<li>
<p>REAL</p>
</li>
<li>
<p><code>FLOAT</code> and <code>DOUBLE</code> are approximate types</p>
<ul>
<li>Uses 4 and 8 bytes IEEE storage format</li>
</ul>
</li>
<li>
<p><code>DECIMAL (m, d)</code> maximum total number of digits, number of digits after decimal point</p>
<ul>
<li>An Exact Value type, up to 65 digits precision, 4 bytes storage for each multiple of nine digits</li>
</ul>
</li>
<li>
<p><code>NUMERIC</code> is a synonym for <code>DECIMAL</code></p>
</li>
<li>
<p><code>REAL</code> is a synonym for <code>DOUBLE</code></p>
<ul>
<li>Unless in <code>REAL_AS_FLOAT</code> SQL mode</li>
</ul>
</li>
</ul>
<h3 id="string-data-types">String Data Types</h3>
<p>All String Data Types Have A Character Set</p>
<ul>
<li>
<p>CHAR</p>
</li>
<li>
<p>VARCHAR</p>
</li>
<li>
<p>TINYTEXT</p>
</li>
<li>
<p>TEXT</p>
</li>
<li>
<p>MEDIUMTEXT</p>
</li>
<li>
<p>LONGTEXT</p>
</li>
<li>
<p><strong>CHAR (n)</strong> - Number of characters, not bytes, wide</p>
<ul>
<li>Always stores n characters</li>
<li>Automatically pads with spaces for shorter strings</li>
</ul>
</li>
<li>
<p><strong>VARCHAR (n)</strong> - Variable length up to maximum n characters</p>
<ul>
<li>Changes to <code>CHAR</code> in implicit temporary tables and mysgld internal buffers</li>
<li>256 characters and longer treated as <code>TEXT</code></li>
<li>For InnoDB, this maximum will depend on the row format</li>
</ul>
</li>
<li>
<p><strong>TEXT</strong> - Large text object</p>
<ul>
<li>Not supported by the <code>MEMORY</code> storage engine</li>
<li>MariaDB uses <code>ARIA</code> for implicit on-disk temporary tables</li>
</ul>
</li>
</ul>
<h3 id="string-data-types-1">String Data Types</h3>
<p>Character Set May Be Global or For Schema, Table, or Column</p>
<ul>
<li>
<p>CHAR</p>
</li>
<li>
<p>VARCHAR</p>
</li>
<li>
<p>TINYTEXT</p>
</li>
<li>
<p>TEXT</p>
</li>
<li>
<p>MEDIUMTEXT</p>
</li>
<li>
<p>LONGTEXT</p>
</li>
<li>
<p>Multi-byte character sets increase disk storage and working memory requirements</p>
<ul>
<li><code>UTF-8</code> requires 3 or 4 bytes per character</li>
</ul>
</li>
<li>
<p>Collations (character order) affect string comparison</p>
</li>
<li>
<p>Collations can be changed for a query</p>
</li>
</ul>
<h3 id="binary-data-types">Binary Data Types</h3>
<ul>
<li>
<p>BINARY</p>
</li>
<li>
<p>VARBINARY</p>
</li>
<li>
<p>TINYBLOB</p>
</li>
<li>
<p>BLOB</p>
</li>
<li>
<p>MEDIUMBLOB</p>
</li>
<li>
<p>LONGBLOB</p>
</li>
<li>
<p><code>BINARY</code>, <code>VARBINARY</code> and <code>BLOBs</code> can contain data with bytes from the whole range from 0 - 255</p>
</li>
<li>
<p>Uses a special character set and collation called &ldquo;binary&rdquo;</p>
</li>
<li>
<p>Blobs are often used to store files in a database</p>
<ul>
<li>Files on disk are often faster</li>
<li>But referential integrity is not guaranteed</li>
</ul>
</li>
<li>
<p>Blobs are included in transactions, replication, and backups</p>
</li>
<li>
<p>Blobs inflate <code>mysqld</code> memory usage</p>
</li>
<li>
<p>Modern InnoDB has some improvements in storage and lookup of blobs</p>
</li>
</ul>
<h3 id="temporal-data-types">Temporal Data Types</h3>
<ul>
<li>DATE</li>
<li>TIME</li>
<li>DATETIME</li>
<li>TIMESTAMP</li>
<li>YEAR</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> CURTIME(<span style="color:#ae81ff">4</span>);
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">-------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> CURTIME(<span style="color:#ae81ff">4</span>)  <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">-------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> <span style="color:#ae81ff">05</span>:<span style="color:#ae81ff">33</span>:<span style="color:#ae81ff">09</span>.<span style="color:#ae81ff">1061</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">-------------+
</span></span></span></code></pre></div><ul>
<li><code>DATE</code> — from 1000-01-01 to 9999-12-31
<ul>
<li>YYYY-MM-DD</li>
</ul>
</li>
<li><code>TIME</code> [(<!-- raw HTML omitted -->)]
<ul>
<li>from -838:59:59 to 838:59:59</li>
</ul>
</li>
<li><code>DATETIME</code> [(<!-- raw HTML omitted -->)]
<ul>
<li>Same ranges as <code>DATE</code> and <code>TIME</code> above</li>
<li>YYYY-MM-DD HH:mm:ss</li>
</ul>
</li>
<li><code>TIMESTAMP</code> — Unix timestamp, in seconds from 1970-01-01
<ul>
<li>Many applications store <code>UNIX_TIMESTAMP()</code> values in unsigned integer field</li>
</ul>
</li>
<li><code>YEAR</code> — Accepts YYYY</li>
</ul>
<h3 id="json-data-type">JSON Data Type</h3>
<ul>
<li>JSON is a language-independent data format.</li>
<li>JSON documents can be validated for correct syntax with <code>JSON_VALID()</code> used as a <code>CHECK</code> constraint.</li>
<li>MariaDB supports a full set of JSON functions.</li>
<li>JSON columns can be indexed by values of an attribute.</li>
<li>The indexes are created by using virtual generated columns.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> city (
</span></span><span style="display:flex;"><span>  Name VARCHAR(<span style="color:#ae81ff">35</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>  Info JSON <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> city <span style="color:#66d9ef">VALUES</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;New York&#39;</span>,
</span></span><span style="display:flex;"><span>  JSON_OBJECT(
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Population&#39;</span>,<span style="color:#e6db74">&#39;8008278&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Country&#39;</span>, <span style="color:#e6db74">&#39;USA&#39;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>  Name, JSON_VALUE(Info,<span style="color:#e6db74">&#39;$.Population&#39;</span>) <span style="color:#66d9ef">AS</span> Population <span style="color:#66d9ef">FROM</span> city;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------+------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Name    <span style="color:#f92672">|</span> Population <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------+------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> <span style="color:#66d9ef">New</span> York<span style="color:#f92672">|</span>  <span style="color:#ae81ff">8008278</span>   <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------+------------+
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> city;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------+------------------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Name    <span style="color:#f92672">|</span> Info                                     <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------+------------------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> <span style="color:#66d9ef">New</span> York<span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#e6db74">&#34;Population&#34;</span>: <span style="color:#e6db74">&#34;8008278&#34;</span>, <span style="color:#e6db74">&#34;Country&#34;</span>:<span style="color:#e6db74">&#34;USA&#34;</span><span style="color:#960050;background-color:#1e0010">}</span><span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------+------------------------------------------+
</span></span></span></code></pre></div><h3 id="special-data-types">Special Data Types</h3>
<ul>
<li>
<p><strong>ENUM</strong> is an enumerated list of string values</p>
<ul>
<li>Holds one of the values listed</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> country (
</span></span><span style="display:flex;"><span>    Continent ENUM(<span style="color:#e6db74">&#39;Asia&#39;</span>,<span style="color:#e6db74">&#39;Europe&#39;</span>,<span style="color:#e6db74">&#39;N America&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;Africa&#39;</span>,<span style="color:#e6db74">&#39;Oceania&#39;</span>,<span style="color:#e6db74">&#39;Antarctica&#39;</span>,<span style="color:#e6db74">&#39;S America&#39;</span>) );
</span></span></code></pre></div></li>
<li>
<p><strong>SET</strong> is a specified list of string values</p>
<ul>
<li>Can hold one or more values</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> countrylanguage (
</span></span><span style="display:flex;"><span>    CountryCode CHAR(<span style="color:#ae81ff">3</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">Language</span> <span style="color:#66d9ef">SET</span> (<span style="color:#e6db74">&#39;English&#39;</span>,<span style="color:#e6db74">&#39;French&#39;</span>,<span style="color:#e6db74">&#39;Mandarin&#39;</span>,<span style="color:#e6db74">&#39;Spanish&#39;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> countrylanguage <span style="color:#66d9ef">VALUES</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#39;CHN&#39;</span>,<span style="color:#e6db74">&#39;Mandarin&#39;</span>),
</span></span><span style="display:flex;"><span>    (<span style="color:#e6db74">&#39;CAN&#39;</span>,<span style="color:#e6db74">&#39;English,French&#39;</span>);
</span></span></code></pre></div></li>
</ul>
<h3 id="special-data-types-1">Special Data Types</h3>
<ul>
<li>
<p><strong>INET6</strong> is a data type for storing IPv6 IP addresses as well as IPv4</p>
<ul>
<li>Stores as a BINARY(16)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> ipaddress (address INET6);
</span></span></code></pre></div></li>
</ul>
<h2 id="built-in-functions">Built-in Functions</h2>
<h3 id="manipulating-date-and-time">Manipulating Date and Time</h3>
<p><strong>Functions for Date and Time Manipulation</strong></p>
<ul>
<li>ADDDATE()</li>
<li>ADDTIME()</li>
<li>CONVERT_TZ()</li>
<li><code>CURDATE()</code></li>
<li>CURTIME()</li>
<li>DATE()</li>
<li><code>DATE_ADD()</code></li>
<li><code>DATE_FORMAT()</code></li>
<li><code>DATE_SUB()</code></li>
<li>DATEDIFF()</li>
<li>DAYNAME()</li>
<li>DAYOFMONTH()</li>
<li>DAYOFWEEK()</li>
<li>DAYOFYEAR()</li>
<li>EXTRACT()</li>
<li>FROM_DAYS()</li>
<li>FROM_UNIXTIME()</li>
<li>GET_FORMAT()</li>
<li><code>HOUR()</code></li>
<li>LAST_DAY()</li>
<li>MAKEDATE()</li>
<li>MAKETIME()</li>
<li>MICROSECOND()</li>
<li><code>MINUTE()</code></li>
<li><code>MONTH()</code></li>
<li>MONTHNAME()</li>
<li><code>NOW()</code></li>
<li>PERIOD_ADD()</li>
<li>PERIOD_DIFF()</li>
<li>QUARTER()</li>
<li>SEC_TO_TIME()</li>
<li>SECOND()</li>
<li>STR_TO_DATE()</li>
<li>SUBDATE()</li>
<li>SUBTIME()</li>
<li>SYSDATE()</li>
<li>TIME()</li>
<li>TIME_FORMAT()</li>
<li>TIME_TO_SEC()</li>
<li>TIMEDIFF()</li>
<li>TIMESTAMP()</li>
<li>TIMESTAMPADD()</li>
<li>TIMESTAMPDIFF()</li>
<li>TO_DAYS()</li>
<li>UNIX_TIMESTAMP()</li>
<li>UTC_DATE()</li>
<li>UTC_TIME()</li>
<li>UTC_TIMESTAMP()</li>
<li>WEEK()</li>
<li>WEEKDAY()</li>
<li>WEEKOFYEAR()</li>
<li><code>YEAR()</code></li>
<li>YEARMONTH()</li>
</ul>
<h3 id="examples-of-date-and-time-functions">Examples of Date and Time Functions</h3>
<p><strong>Used in Queries and Data Manipulation Statements</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> NOW() <span style="color:#f92672">+</span> INTERVAL <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">DAY</span>
</span></span><span style="display:flex;"><span>           <span style="color:#f92672">-</span> INTERVAL <span style="color:#ae81ff">1</span> HOUR
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">AS</span> <span style="color:#e6db74">&#39;Day &amp; Hour Earlier&#39;</span>;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> <span style="color:#66d9ef">Day</span> <span style="color:#f92672">&amp;</span> Hour Earlier  <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> <span style="color:#ae81ff">2020</span><span style="color:#f92672">-</span><span style="color:#ae81ff">06</span><span style="color:#f92672">-</span><span style="color:#ae81ff">02</span> <span style="color:#ae81ff">08</span>:<span style="color:#ae81ff">32</span>:<span style="color:#ae81ff">44</span> <span style="color:#f92672">|</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------------------+
</span></span></span></code></pre></div><p><strong>Used in WHERE Clauses</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> table1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> col3 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;today&#39;</span>, col4 <span style="color:#f92672">=</span> NOW()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> col5 <span style="color:#f92672">=</span> CURDATE();
</span></span></code></pre></div><p><strong>Used in Bulk Load</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">load</span> <span style="color:#66d9ef">data</span> <span style="color:#66d9ef">local</span> infile <span style="color:#e6db74">&#39;/tmp/test.csv&#39;</span> <span style="color:#66d9ef">into</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">table</span> test fields terminated <span style="color:#66d9ef">by</span> <span style="color:#e6db74">&#39;,&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ignore</span> <span style="color:#ae81ff">1</span> lines (id,<span style="color:#f92672">@</span>dt1)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> dt<span style="color:#f92672">=</span>str_to_date(<span style="color:#f92672">@</span>dt1,<span style="color:#e6db74">&#39;%d/%m/%Y&#39;</span>);
</span></span></code></pre></div><h3 id="manipulating-strings">Manipulating Strings</h3>
<h4 id="functions-for-string-manipulation">Functions For String Manipulation</h4>
<ul>
<li>ASCII()</li>
<li>BIN()</li>
<li>BINARY</li>
<li>BIT_LENGTH()</li>
<li>CAST()</li>
<li>CHAR()</li>
<li>CHARACTER_LENGTH()</li>
<li>CHAR_LENGTH()</li>
<li>COALESCE()</li>
<li>CONCAT()</li>
<li>CONCAT_WS()</li>
<li>CONVERT()</li>
<li>ELT()</li>
<li>EXPORT_SET()</li>
<li>EXTRACTVALUE()</li>
<li>FIELD()</li>
<li>FIND_IN_SET()</li>
<li>FORMAT()</li>
<li>FROM_BASE64()</li>
<li>HEX()</li>
<li>INSERT()</li>
<li>INSTR()</li>
<li>LCASE()</li>
<li>LEFT()</li>
<li>LENGTH()</li>
<li>LIKE</li>
<li>LOAD_FILE()</li>
<li>LOCATE()</li>
<li>LOWER()</li>
<li>LPAD()</li>
<li>LTRIM()</li>
<li>MAKE_SET()</li>
<li>MATCH AGAINST</li>
<li>MID()</li>
<li>NOT LIKE</li>
<li>NOT REGEXP</li>
<li>OCTET_LENGTH()</li>
<li>ORD()</li>
<li>POSITION()</li>
<li>QUOTE()</li>
<li>REGEXP()</li>
<li>REPEAT()</li>
<li>REPLACE()</li>
<li>REVERSE()</li>
<li>RIGHT()</li>
<li>RPAD()</li>
<li>RTRIM()</li>
<li>SOUNDEX()</li>
<li>SOUNDS LIKE</li>
<li>SPACE()</li>
<li>STRCMP()</li>
<li>SUBSTR()</li>
<li>SUBSTRING()</li>
<li>SUBSTRING_INDEX()</li>
<li>TO_BASE64()</li>
<li>TRIM()</li>
<li>UCASE()</li>
<li>UNHEX()</li>
<li>UNHEX()</li>
<li>UPPER()</li>
<li>WEIGHT_STRING()</li>
</ul>
<h3 id="an-example-of-a-string-function">An Example of a String Function</h3>
<p>Used in Queries and Data Manipulation Statements</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">domain</span>, domain_count
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">SUBSTRING</span>(email_address, LOCATE(<span style="color:#e6db74">&#39;@&#39;</span>, email_address) <span style="color:#f92672">+</span><span style="color:#ae81ff">1</span> ) <span style="color:#66d9ef">AS</span> <span style="color:#66d9ef">domain</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">AS</span> domain_count
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">FROM</span> clients_email
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#66d9ef">domain</span>
</span></span><span style="display:flex;"><span>) <span style="color:#66d9ef">AS</span> derived1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> domain_count <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">200</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">100</span>;
</span></span></code></pre></div><h3 id="working-with-the-json-data-type">Working with the JSON Data Type</h3>
<h4 id="json-functions">JSON Functions</h4>
<p><code>JSONPath Expressions</code><br>
<code>JSON_ARRAY</code><br>
<code>JSON_ARRAYAGG</code><br>
<code>JSON_ARRAY_APPEND</code><br>
<code>JSON_ARRAY_INSERT</code><br>
<code>JSON_COMPACT</code><br>
<code>JSON_CONTAINS</code><br>
<code>JSON_CONTAINS_PATH</code><br>
<code>JSON_DEPTH</code><br>
<code>JSON_DETAILED</code><br>
<code>JSON_EQUALS</code><br>
<code>JSON_EXISTS</code><br>
<code>JSON_EXTRACT</code><br>
<code>JSON_INSERT</code><br>
<code>JSON_KEYS</code><br>
<code>JSON_LENGTH</code><br>
<code>JSON_LOOSE</code><br>
<code>JSON_MERGE</code><br>
<code>JSON_MERGE_PATCH</code><br>
<code>JSON_MERGE_PRESERVE</code><br>
<code>JSON_NORMALIZE</code><br>
<code>JSON_OBJECT</code><br>
<code>JSON_OBJECTAGG</code><br>
<code>JSON_OVERLAPS</code><br>
<code>JSON_QUERY</code><br>
<code>JSON_QUOTE</code><br>
<code>JSON_REMOVE</code><br>
<code>JSON_REPLACE</code><br>
<code>JSON_SEARCH</code><br>
<code>JSON_SET</code><br>
<code>JSON_TABLE</code><br>
<code>JSON_TYPE</code><br>
<code>JSON_UNQUOTE</code><br>
<code>JSON_VALID</code><br>
<code>JSON_VALUE</code></p>
<h3 id="examples-of-json-functions">Examples of JSON Functions</h3>
<h4 id="used-to-pull-a-scalar-value-from-json-data">Used to pull a scalar value from JSON data</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> name, latitude, longitude, 
</span></span><span style="display:flex;"><span>JSON_VALUE(attr, <span style="color:#e6db74">&#39;$.details.foodType&#39;</span>) <span style="color:#66d9ef">AS</span> food_type 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> locations 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">type</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;R&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> name   <span style="color:#f92672">|</span> latitude   <span style="color:#f92672">|</span> longitude   <span style="color:#f92672">|</span> food_type <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span><span style="color:#75715e">--------|------------|-------------|-----------|
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Shogun <span style="color:#f92672">|</span> <span style="color:#ae81ff">34</span>.<span style="color:#ae81ff">1561131</span> <span style="color:#f92672">|</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">118</span>.<span style="color:#ae81ff">131943</span> <span style="color:#f92672">|</span> Japanese  <span style="color:#f92672">|</span>
</span></span></code></pre></div><h4 id="used-to-return-entire-json-object-data">Used to return entire JSON object data</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> name, latitude, longitude, 
</span></span><span style="display:flex;"><span>JSON_QUERY(attr, <span style="color:#e6db74">&#39;$.details&#39;</span>) <span style="color:#66d9ef">AS</span> details 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> locations 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">type</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;R&#39;</span><span style="color:#960050;background-color:#1e0010">\</span><span style="color:#66d9ef">G</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">***************************</span> <span style="color:#ae81ff">1</span>. <span style="color:#66d9ef">row</span> <span style="color:#f92672">***************************</span>
</span></span><span style="display:flex;"><span>name: Shogun
</span></span><span style="display:flex;"><span>latitude: <span style="color:#ae81ff">34</span>.<span style="color:#ae81ff">156113</span>
</span></span><span style="display:flex;"><span>longitude: <span style="color:#f92672">-</span><span style="color:#ae81ff">118</span>.<span style="color:#ae81ff">131943</span>
</span></span><span style="display:flex;"><span>details: <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#e6db74">&#34;foodType&#34;</span>: <span style="color:#e6db74">&#34;Japanese&#34;</span>, <span style="color:#e6db74">&#34;menu&#34;</span>: <span style="color:#e6db74">&#34;https://www.restaurantshogun.com/menu/teppan-1-22.pdf&#34;</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span></code></pre></div><h3 id="examples-of-json-functions-1">Examples of JSON Functions</h3>
<h4 id="used-to-validate-json-values">Used to validate JSON values</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> locations (
</span></span><span style="display:flex;"><span>    id INT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> AUTO_INCREMENT,
</span></span><span style="display:flex;"><span>    name VARCHAR(<span style="color:#ae81ff">100</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">type</span> CHAR(<span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    latitude DECIMAL(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">6</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    longitude DECIMAL(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">6</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    attr LONGTEXT CHARACTER <span style="color:#66d9ef">SET</span> utf8mb4
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">COLLATE</span> utf8mb4_bin <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">CHECK</span> (JSON_VALID(<span style="color:#e6db74">&#39;attr&#39;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (id)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h4 id="used-to-insert-fields">Used to insert fields</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> locations
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">SET</span> attr <span style="color:#f92672">=</span> JSON_INSERT(attr,<span style="color:#e6db74">&#39;$.nickname&#39;</span>,<span style="color:#e6db74">&#39;The Bean&#39;</span>) <span style="color:#66d9ef">WHERE</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>;
</span></span></code></pre></div><h4 id="used-to-create-new-arrays">Used to create new arrays</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> locations
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">SET</span> attr <span style="color:#f92672">=</span> JSON_INSERT(attr, <span style="color:#e6db74">&#39;$.foodTypes&#39;</span>,
</span></span><span style="display:flex;"><span>    JSON_ARRAY(<span style="color:#e6db74">&#39;Asian&#39;</span>, <span style="color:#e6db74">&#39;Mexican&#39;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">WHERE</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span></code></pre></div><h3 id="examples-of-json-functions-2">Examples of JSON Functions</h3>
<p>Used to convert data</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> l.name, d.food_type, d.menu
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> locations <span style="color:#66d9ef">AS</span> l,
</span></span><span style="display:flex;"><span>     JSON_TABLE(l.attr,
</span></span><span style="display:flex;"><span>       <span style="color:#e6db74">&#39;$&#39;</span> COLUMNS(
</span></span><span style="display:flex;"><span>         food_type VARCHAR(<span style="color:#ae81ff">25</span>) PATH <span style="color:#e6db74">&#39;$.foodType&#39;</span>,
</span></span><span style="display:flex;"><span>         menu VARCHAR(<span style="color:#ae81ff">200</span>) PATH <span style="color:#e6db74">&#39;$.menu&#39;</span>)
</span></span><span style="display:flex;"><span>     ) <span style="color:#66d9ef">AS</span> d
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> name   <span style="color:#f92672">|</span> food_type <span style="color:#f92672">|</span> menu                                                                 <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span><span style="color:#75715e">--------|-----------|----------------------------------------------------------------------|
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Shogun <span style="color:#f92672">|</span> Japanese  <span style="color:#f92672">|</span> https:<span style="color:#f92672">//</span>www.restaurantshogun.com<span style="color:#f92672">/</span>menu<span style="color:#f92672">/</span>teppan<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">-</span><span style="color:#ae81ff">22</span>.pdf <span style="color:#f92672">|</span>
</span></span></code></pre></div><h2 id="lesson-summary">Lesson Summary</h2>
<ul>
<li>Identify and describe the schema objects available within MariaDB Enterprise Server</li>
<li>Demonstrate how to create and use databases, tables, and columns in MariaDB Enterprise Server</li>
<li>Compare and contrast the data types and built-in functions in MariaDB Enterprise Server, and explain their use cases</li>
</ul>

      </div>

      
      <div class="right-menu">
          <div class="quick-links">
            <a href="https://github.com/robertsilen/mariadb-for-universities-www/blob/main/content/dba/mariadb-dba-02-schema-objects.md" class="icon-link edit-page">View page source</a>
            <a href="https://github.com/robertsilen/mariadb-for-universities-www/edit/main/content/dba/mariadb-dba-02-schema-objects.md" class="icon-link view-source">Edit this page</a>
            <a href="https://github.com/robertsilen/mariadb-for-universities-www/issues/new?title=Course%20Material%20issue%20for%20Lesson%202%3a%20Schema%20Objects&body=I%20found%20an%20issue%20with%20the%20documentation%20for%20Lesson%202%3a%20Schema%20Objects.%0A%0A%0A%0A---%0A%0AThis%20issue%20is%20related%20to%20the%20following%20page%3A%0A%0Ahttp%3a%2f%2flocalhost%3a1313%2fdba%2fmariadb-dba-02-schema-objects%2f" class="icon-link create-doc">Create Material issue</a>
            <a href="#" class="icon-link print">Print entire section</a>
          </div>
      </div>
  </div>


</body>
</html>
