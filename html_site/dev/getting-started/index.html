<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>MariaDB for Universities Program: Course Material</title>
<link rel=stylesheet href=/css/main.css><meta property="og:url" content="https://uni.mariadb.org/dev/getting-started/"><meta property="og:site_name" content="MariaDB for Universities Program Course Material"><meta property="og:title" content="Lesson 1: Getting Started"><meta property="og:description" content="Getting started Learning objectives Discuss MariaDB’s client / server architecture Gain an understanding of isolation levels and MariaDB’s storage engine concept Utilize MariaDB connectors and utilities Learn basic MariaDB administration tasks relating to server logs, user management, and backing up and restoring data Architecture Installation methods and packages Linux MariaDB repositories Distribution repositories Binary tarballs Docker Container Image Source tarballs Windows MariaDB installer Docker Container Image Source tarballs MacOS Homebrew Macports Docker Container Image Source tarballs Only certain MariaDB repositories and installers provide MariaDB Enterprise Server. All other sources provide MariaDB Community Server."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="dev"><meta property="article:published_time" content="2025-04-10T00:00:00+00:00"><meta property="article:modified_time" content="2025-04-10T00:00:00+00:00"></head><body><div class=top-menu><div class=menu-left><a href=/ class=home-link><img src=# alt class=menu-icon>
MariaDB for Universities Program: Course Material</a></div><div class=menu-right><a href=https://mariadb.org>MariaDB Foundation (mariadb.org)</a></div></div><div class=content-wrapper><div class=left-menu><div class=table-of-contents><h2><a href=.>Lesson 1: Getting Started</a></h2><nav id=TableOfContents><ul><li><a href=#learning-objectives>Learning objectives</a></li><li><a href=#architecture>Architecture</a><ul><li><a href=#installation-methods-and-packages>Installation methods and packages</a></li><li><a href=#isolation-levels>Isolation levels</a></li><li><a href=#types-of-isolation-levels>Types of isolation levels</a></li><li><a href=#storage-engine-concept>Storage engine concept</a></li></ul></li><li><a href=#connectors-and-utilities>Connectors and utilities</a><ul><li><a href=#connectors>Connectors</a></li><li><a href=#client-connections>Client connections</a></li><li><a href=#mariadb-client---command-line-tool>Mariadb client - command-line tool</a></li><li><a href=#mariadb-admin---command-line-tool>Mariadb-admin - command-line tool</a></li><li><a href=#graphical-user-interface-tools>Graphical user interface tools</a></li><li><a href=#business-intelligence-and-analysis-tools>Business intelligence and analysis tools</a></li></ul></li><li><a href=#basic-administration>Basic administration</a><ul><li><a href=#configuration-file-locations>Configuration file locations</a></li><li><a href=#server-defaults>Server defaults</a></li><li><a href=#starting-and-stopping-the-server>Starting and stopping the server</a></li><li><a href=#error-log>Error log</a></li><li><a href=#sql-error-log>Sql error log</a></li><li><a href=#slow-query-log>Slow query log</a></li><li><a href=#mariadb-user-accounts>Mariadb user accounts</a></li><li><a href=#creating-users>Creating users</a></li><li><a href=#checking-users>Checking users</a></li><li><a href=#managing-users>Managing users</a></li><li><a href=#managing-users-1>Managing users</a></li><li><a href=#assigning-privileges>Assigning privileges</a></li><li><a href=#available-privileges-show-privileges>Available privileges (show privileges)</a></li><li><a href=#checking--revoking-privileges>Checking & revoking privileges</a></li><li><a href=#restricting-users>Restricting users</a></li><li><a href=#removing-users>Removing users</a></li></ul></li><li><a href=#backing-up-and-restoring-data>Backing up and restoring data</a><ul><li><a href=#basic-types-of-backup-methods>Basic types of backup methods</a></li><li><a href=#mariadb-backup>MariaDB backup</a></li><li><a href=#backing-up-data---mariadb-backup>Backing up data - MariaDB backup</a></li><li><a href=#restoring-data---mariadb-backup>Restoring data - MariaDB backup</a></li><li><a href=#backing-up-data---mariadb-dump>Backing up data - mariadb-dump</a></li><li><a href=#restoring-data---mariadb-dump>Restoring data - mariadb-dump</a></li></ul></li><li><a href=#lesson-summary>Lesson summary</a></li><li><a href=#lab-exercises>Lab exercises</a></li></ul></nav></div></div><div class=main-content><nav class=breadcrumb><a href=/>MariaDB for Universities Course Material</a>
>
<a href=/dev/>MariaDB Developer Course</a>
> <span class=current>Lesson 1: Getting Started</span></nav><h1>Lesson 1: Getting Started</h1><h1 id=getting-started>Getting started</h1><h2 id=learning-objectives>Learning objectives</h2><ul><li>Discuss MariaDB&rsquo;s client / server architecture</li><li>Gain an understanding of isolation levels and MariaDB&rsquo;s storage engine concept</li><li>Utilize MariaDB connectors and utilities</li><li>Learn basic MariaDB administration tasks relating to server logs, user management, and backing up and restoring data</li></ul><h2 id=architecture>Architecture</h2><h3 id=installation-methods-and-packages>Installation methods and packages</h3><h4 id=linux>Linux</h4><ul><li>MariaDB repositories</li><li>Distribution repositories</li><li>Binary tarballs</li><li>Docker Container Image</li><li>Source tarballs</li></ul><h4 id=windows>Windows</h4><ul><li>MariaDB installer</li><li>Docker Container Image</li><li>Source tarballs</li></ul><h4 id=macos>MacOS</h4><ul><li>Homebrew</li><li>Macports</li><li>Docker Container Image</li><li>Source tarballs</li></ul><p>Only certain MariaDB repositories and installers provide MariaDB Enterprise Server. All other sources provide MariaDB Community Server.</p><h3 id=isolation-levels>Isolation levels</h3><p>When two or more transactions occur at the same time, the isolation level defines the degree at which a transaction is isolated from the resource or data modifications made by other transactions.</p><p>The default isolation level is REPEATABLE-READ.</p><p>To change the isolation level, you need to set the <code>tx_isolation</code> variable which is dynamic and has session level scope.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>SET</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>SESSION</span><span style=color:#bbb> </span>tx_isolation<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;READ-COMMITTED&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>The <code>transaction_isolation</code> option can be set in the configuration file.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#007020;font-weight:700>[mariadb]</span>
</span></span><span style=display:flex><span><span style=color:#4070a0>transaction_isolation</span> <span style=color:#666>=</span> <span style=color:#4070a0>READ-COMMITTED</span>
</span></span></code></pre></div><h3 id=types-of-isolation-levels>Types of isolation levels</h3><p>Read Uncommitted<br>Allows a transaction to see uncommitted changes made by other transactions (<em>dirty read</em>).</p><p>Read Committed<br>Allows a transaction to see changes made by other transactions (different row content or fewer rows due to a DELETE, or rows no longer match due to an UPDATE) only if the changes have been committed (<em>non-repeatable read</em>).</p><p>Repeatable Read<br>Ensures that if a transaction issues the same SELECT twice, no rows vanish or show different content. New rows (<em>phantom rows</em>) can still appear.<br>Due to the implementation of row locks in InnoDB there are no phantom rows in InnoDB.</p><p>Serializable<br>Completely isolates a transaction’s effects from other transactions.<br>In InnoDB this causes read locks after SELECT until COMMIT or ROLLBACK (like WITH LOCK IN SHARE MODE).</p><h3 id=storage-engine-concept>Storage engine concept</h3><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>SHOW</span><span style=color:#bbb> </span>ENGINES;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>TABLE</span><span style=color:#bbb> </span>table1<span style=color:#bbb> </span>(col1<span style=color:#bbb> </span><span style=color:#007020>INT</span>)<span style=color:#bbb> </span>ENGINE<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>Aria;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>ALTER</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>TABLE</span><span style=color:#bbb> </span>table1<span style=color:#bbb> </span>ENGINE<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>InnoDB;<span style=color:#bbb>
</span></span></span></code></pre></div><p>Multiple Storage Engines on a Server and within a Query are Allowed<br>They Determine Storage Medium (disk, memory, etc.)</p><p>Atomicity Consistency Isolation Durability (ACID)</p><ul><li>A: Transactions are All or None</li><li>C: Transactions preserve the integrity of the data</li><li>I: Transactions are Not Visible to Other Sessions</li><li>D: Data is saved and persists, dependable</li></ul><p>Lock at certain Levels (table, page, row)</p><p>Some offer Special Features (Foreign Keys, GIS, Columnar Data)</p><p>Some Provide optimization</p><h2 id=connectors-and-utilities>Connectors and utilities</h2><h3 id=connectors>Connectors</h3><p>Various Libraries for connecting to MariaDB</p><p><strong>Connectors</strong></p><ul><li>MariaDB Connector/C</li><li>MariaDB Connector/Node.js</li><li><ul><li>MariaDB Connector/C++</li></ul></li><li><ul><li>MariaDB Connector/ODBC</li></ul></li><li>MariaDB Connector/J (JDBC)</li><li><ul><li>MariaDB Connector/Python</li></ul></li><li>MariaDB Connector/R2DBC</li><li>** .NET, Perl DBI, PHP, Ruby</li></ul><p>* Wrapper for MariaDB C API, which uses the MariaDB Network Protocol</p><p>** Non-native (unsupported) Connectors to use with MariaDB</p><h3 id=client-connections>Client connections</h3><ul><li>TCP/IP Connections available on All Platforms (<code>skip_networking</code> disables this)</li><li>Socket Files available on Unix Platforms <em>(fastest choice)</em></li><li>Named Pipe (<code>named_pipe</code>) and Shared Memory (<code>shared_memory</code>) available on Windows</li><li>MariaDB Connections require few resources and easy to open</li><li>Most use External Connection Pools <em>(not needed usually)</em></li><li>Set Global Client Connection Limit (<code>max_connections=n</code>)</li></ul><h3 id=mariadb-client---command-line-tool>Mariadb client - command-line tool</h3><ul><li>Shell or SSH</li><li>Manually Execute any SQL statement</li><li>Display MariaDB settings and status counters</li><li>Use as an Interactive Session, or Pipe SQL via Shell</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb --user=root -h hostname -P 3306 -p</span>
</span></span><span style=display:flex><span>MariaDB <span style=color:#666>[(</span>none<span style=color:#666>)]</span>&gt; SHOW DATABASES;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb -p -u user_name --execute &#34;SHOW DATABASES&#34;</span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb -e &#34;CREATE DATABASE world&#34;</span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb world &lt; /path/to/world.sql</span>
</span></span></code></pre></div><h3 id=mariadb-admin---command-line-tool>Mariadb-admin - command-line tool</h3><ul><li>Shell or SSH</li><li>Useful for scripting</li><li>Manage User Accounts, Passwords, Permissions</li><li>Display MariaDB settings and status counters</li><li>View and Kill Active Connections</li><li>Ping or Shutdown mysqld</li><li>Create and Drop Databases</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb-admin processlist</span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb-admin kill 12345678</span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb-admin -u root -p create ragnar</span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb-admin extended-status</span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb-admin variables</span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb-admin ping</span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb-admin status</span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb-admin shutdown</span>
</span></span></code></pre></div><h3 id=graphical-user-interface-tools>Graphical user interface tools</h3><ul><li>Can connect via SSL or SSH tunnel</li><li>Schema and query construction</li><li>Optimization and profiling</li><li>User account management</li><li>Task and backup scheduling</li><li>Data migration and cleaning</li><li>Schema sync and diff tools</li><li>Notifications</li></ul><p><strong>Windows</strong></p><ul><li>HeidiSQL</li><li>DBeaver</li><li>SQLyog</li><li>Toad</li></ul><p><strong>Mac and Linux</strong></p><ul><li>DBeaver</li><li>SequelPro</li><li>Querious</li></ul><h3 id=business-intelligence-and-analysis-tools>Business intelligence and analysis tools</h3><p>Can Connect via SSL or SSH tunnel</p><p>Schema and Query Construction</p><p>Data Visualization and Analysis</p><p>Use MariaDB Connectors</p><ul><li><strong>Microsoft PowerBI</strong> - Connector/ODBC</li><li><strong>Tableau</strong> - Connector/ODBC</li><li><strong>Apache Zeppelin</strong> - Connector/J</li><li><strong>Jupyter Notebook</strong> - Connector/Python</li></ul><h2 id=basic-administration>Basic administration</h2><h3 id=configuration-file-locations>Configuration file locations</h3><h4 id=linux-1>Linux</h4><p><code>/etc/my.cnf</code><br><code>/etc/my.cnf.d/*.cnf</code><br><code>$MYSQL_HOME/my.cnf</code><br><code>[datadir]/my.cnf</code><br><code>~/.my.cnf (clients)</code><br><code>--defaults-file</code><br><code>--defaults-extra-file</code></p><h4 id=windows-1>Windows</h4><p><code>C:\Windows\my.ini</code><br><code>C:\Windows\my.cnf</code><br><code>C:\my.ini</code><br><code>INSTALLDIR\my.ini</code><br><code>INSTALLDIR\my.cnf</code><br><code>INSTALLDIR\data\my.ini</code><br><code>INSTALLDIR\data\my.cnf</code><br><code>--defaults-extra-file</code></p><h3 id=server-defaults>Server defaults</h3><h4 id=finding-defaults>Finding Defaults</h4><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadbd --print-defaults</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mariadbd would have been started with the following arguments:
</span></span><span style=display:flex><span>--datadir<span style=color:#666>=</span>/data/mysql
</span></span><span style=display:flex><span>--socket<span style=color:#666>=</span>/var/lib/mysql/mysql.sock
</span></span><span style=display:flex><span>--user<span style=color:#666>=</span>mysql
</span></span><span style=display:flex><span>--symbolic_links<span style=color:#666>=</span><span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>--local_infile<span style=color:#666>=</span><span style=color:#40a070>0</span>
</span></span></code></pre></div><h4 id=configuration-file-servercnf>Configuration File (Server.Cnf)</h4><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#666>[</span>server<span style=color:#666>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#666>[</span>mysqld<span style=color:#666>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#666>[</span>galera<span style=color:#666>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#666>[</span>embedded<span style=color:#666>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#666>[</span>mariadb<span style=color:#666>]</span>
</span></span><span style=display:flex><span><span style=color:#bb60d5>datadir</span><span style=color:#666>=</span>/data/mysql
</span></span><span style=display:flex><span><span style=color:#bb60d5>socket</span><span style=color:#666>=</span>/var/lib/mysql/mysql.sock
</span></span><span style=display:flex><span><span style=color:#bb60d5>user</span><span style=color:#666>=</span>mysql
</span></span><span style=display:flex><span><span style=color:#bb60d5>symbolic_links</span><span style=color:#666>=</span><span style=color:#40a070>0</span>
</span></span><span style=display:flex><span><span style=color:#bb60d5>local_infile</span><span style=color:#666>=</span><span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#666>[</span>mariadb-10.4<span style=color:#666>]</span>
</span></span></code></pre></div><h3 id=starting-and-stopping-the-server>Starting and stopping the server</h3><p><code>systemctl [start|stop|restart|status] mariadb</code></p><p>Configure start and stop timeouts by creating timeout.conf file</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># vi /etc/systemd/system/mariadb.service.d/timeout.conf</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#666>[</span>Service<span style=color:#666>]</span>
</span></span><span style=display:flex><span><span style=color:#bb60d5>TimeoutStartSec</span><span style=color:#666>=</span>30min
</span></span><span style=display:flex><span><span style=color:#bb60d5>TimeoutStopSec</span><span style=color:#666>=</span>30min
</span></span></code></pre></div><p>Reload the systemd daemon
<code>systemctl daemon-reload</code>
<code>systemctl restart mariadb</code></p><h3 id=error-log>Error log</h3><ul><li>Active by default</li><li>Contains startup, shutdown, and error messages</li><li>Unix uses stderr, sent to <code>host_name.err</code> in datadir</li><li>Systems that use systemd redirect to the syslog by default</li><li>Windows uses <code>host_name.err</code> in datadir, or System Event Log</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#666>[</span>mariadb<span style=color:#666>]</span>
</span></span><span style=display:flex><span><span style=color:#bb60d5>log_error</span> <span style=color:#666>=</span> /path/to/error_log_file_name
</span></span><span style=display:flex><span><span style=color:#bb60d5>log_warnings</span> <span style=color:#666>=</span> <span style=color:#40a070>1</span>
</span></span></code></pre></div><p><em>Excerpt from my.cnf or my.ini configuration file</em></p><p><em>Set <code>log_warnings</code> to 2 for verbose mode</em></p><h3 id=sql-error-log>Sql error log</h3><ul><li>Logs SQL errors<ul><li>Records error messages with SQL statement</li><li>Saves username and host for SQL statement</li></ul></li><li>Used for detecting SQL injections</li><li>Logs user, host, & time</li><li>Dynamically loadable</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>MariaDB<span style=color:#bbb> </span>[(<span style=color:#007020;font-weight:700>none</span>)]<span style=color:#666>&gt;</span><span style=color:#bbb> </span>INSTALL<span style=color:#bbb> </span>PLUGIN<span style=color:#bbb> </span>sql_error_log<span style=color:#bbb> </span>SONAME<span style=color:#bbb> </span><span style=color:#4070a0>&#39;sql_errlog&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>Requires INSERT privilege for mysql.plugin table</p><h3 id=slow-query-log>Slow query log</h3><ul><li>Queries that take more seconds to execute than <code>long_query_time</code></li><li>Contains Queries in Plain Text (security risk!)</li><li>Useful when testing an application or new database</li><li>Use <code>mariadb-dumpslow</code> to Read Log</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#007020;font-weight:700>[mariadb]</span>
</span></span><span style=display:flex><span><span style=color:#4070a0>slow_query_log</span> <span style=color:#666>=</span> <span style=color:#4070a0>1</span>
</span></span><span style=display:flex><span><span style=color:#4070a0>slow_query_log_file</span> <span style=color:#666>=</span> <span style=color:#4070a0>/path/to/mariadb-slow.log</span>
</span></span><span style=display:flex><span><span style=color:#4070a0>long_query_time</span> <span style=color:#666>=</span> <span style=color:#4070a0>2.0</span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># log_queries_not_using_indexes</span>
</span></span><span style=display:flex><span><span style=color:#4070a0>log_slow_admin_statements</span><span style=color:#666>=</span><span style=color:#4070a0>1</span>
</span></span><span style=display:flex><span><span style=color:#4070a0>log_slow_disabled_statements</span><span style=color:#666>=</span><span style=color:#4070a0>&#39;admin,call,slave,sp&#39;</span>
</span></span></code></pre></div><h3 id=mariadb-user-accounts>Mariadb user accounts</h3><ul><li>Authentication is based on user, host and password</li><li>Privileges are based on user and host combined, and the user&rsquo;s current role</li><li>Privileges can be granted globally, at the database level, at the table level or at the column level</li></ul><h3 id=creating-users>Creating users</h3><p>Changes made with the account management statements are automatically activated</p><p>Use the <code>CREATE USER</code> statement to create users in MariaDB</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>USER</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host&#39;</span><span style=color:#bbb> </span>IDENTIFIED<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>BY</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;password&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>Resource limits such as the number of queries, updates or connections per hour can be set by appending the resource_option to the <code>CREATE USER</code> statement</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>USER</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#007020;font-weight:700>WITH</span><span style=color:#bbb> </span>MAX_QUERIES_PER_HOUR<span style=color:#bbb> </span><span style=color:#40a070>10</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>MAX_UPDATES_PER_HOUR<span style=color:#bbb> </span><span style=color:#40a070>20</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>MAX_CONNECTIONS_PER_HOUR<span style=color:#bbb> </span><span style=color:#40a070>30</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>MAX_USER_CONNECTIONS<span style=color:#bbb> </span><span style=color:#40a070>40</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>Use <code>MAX_USER_CONNECTIONS</code> to limit the number of simultaneous connections by a user</p><p>Append the following tls_option to the <code>CREATE USER</code> statement to specify the requirement and details of secure SSL connections per user</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>USER</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;foo&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;test&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>REQUIRE<span style=color:#bbb> </span>ISSUER<span style=color:#bbb> </span><span style=color:#4070a0>&#39;foo_issuer&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>SUBJECT<span style=color:#bbb> </span><span style=color:#4070a0>&#39;foo_subject&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>CIPHER<span style=color:#bbb> </span><span style=color:#4070a0>&#39;text&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=checking-users>Checking users</h3><p>The <code>SHOW CREATE USER</code> statement is a useful way to see the command required to create a user for auditing or the creation of similar accounts</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>SHOW</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>USER</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host&#39;</span><span>\</span><span style=color:#007020;font-weight:700>G</span><span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=managing-users>Managing users</h3><p>Changes made with the account management statements are automatically activated.</p><p><strong>Change a user’s username and host</strong></p><p>RENAME USER statement</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>RENAME</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>USER</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user1&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host1&#39;</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>TO</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user2&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host2&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p><strong>Change a user’s password</strong></p><p>SET PASSWORD statement</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>SET</span><span style=color:#bbb> </span>PASSWORD<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>FOR</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host&#39;</span><span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>PASSWORD<span style=color:#bbb> </span>(<span style=color:#4070a0>&#39;mariadb2&#39;</span>);<span style=color:#bbb>
</span></span></span></code></pre></div><p><strong>The ALTER USER statement allows for easy modification of existing user accounts</strong></p><p>Changing a user&rsquo;s password can be rewritten to use the ALTER USER statement</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>ALTER</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>USER</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>CURRENT_USER</span>()<span style=color:#bbb> </span>IDENTIFIED<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>BY</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;mariadb2&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=managing-users-1>Managing users</h3><p><code>ALTER USER</code> statement to limit the number of simultaneous connections</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>ALTER</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>USER</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host&#39;</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>WITH</span><span style=color:#bbb> </span>MAX_USER_CONNECTIONS<span style=color:#bbb> </span><span style=color:#40a070>10</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>The <code>ALTER USER</code> statement can also be used to set certain TLS-related restrictions</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>ALTER</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>USER</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user2&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host2&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>REQUIRE<span style=color:#bbb> </span>SUBJECT<span style=color:#bbb> </span><span style=color:#4070a0>&#39;/CN=alice/O=My Dom, Inc./C=US/ST=Oregon/L=Portland&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>AND</span><span style=color:#bbb> </span>ISSUER<span style=color:#bbb> </span><span style=color:#4070a0>&#39;/C=FI/ST=Somewhere/L=City/O=Some Company/CN=Peter Parker/emailAddress=p.parker@marvel.com&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>AND</span><span style=color:#bbb> </span>CIPHER<span style=color:#bbb> </span><span style=color:#4070a0>&#39;TLSv1.2&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=assigning-privileges>Assigning privileges</h3><p>The <code>mysql</code> database contains the grants tables, which are loaded into memory when MariaDB starts up</p><p>Users and roles are assigned privileges with the <code>GRANT</code> statement</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>GRANT</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>priv_type<span style=color:#bbb> </span>[(column_list)]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>[,<span style=color:#bbb> </span>priv_type<span style=color:#bbb> </span>[(column_list)]]<span style=color:#bbb> </span>...<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#007020;font-weight:700>ON</span><span style=color:#bbb> </span>[object_type]<span style=color:#bbb> </span>priv_level<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#007020;font-weight:700>TO</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>user</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>[<span style=color:#007020;font-weight:700>WITH</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>GRANT</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>OPTION</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>     </span><span style=color:#666>|</span><span style=color:#bbb> </span>MAX_QUERIES_PER_HOUR<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>count</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>     </span><span style=color:#666>|</span><span style=color:#bbb> </span>MAX_UPDATES_PER_HOUR<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>count</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>     </span><span style=color:#666>|</span><span style=color:#bbb> </span>MAX_CONNECTIONS_PER_HOUR<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>count</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>     </span><span style=color:#666>|</span><span style=color:#bbb> </span>MAX_USER_CONNECTIONS<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>count</span><span style=color:#bbb> </span>]<span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=available-privileges-show-privileges>Available privileges (show privileges)</h3><ul><li><p><strong>Basic Privileges</strong></p><ul><li>Usage</li><li>Select</li><li>Insert</li><li>Update</li><li>Delete</li><li>Show Databases</li></ul></li><li><p><strong>Customizing Privileges</strong></p><ul><li>Create Routine</li><li>Alter Routine</li><li>Execute</li><li>Event</li><li>Trigger</li></ul></li><li><p><strong>Administrator Privileges</strong></p><ul><li>All [Privileges]</li><li>Super</li><li>Create User</li><li>Grant Option</li><li>Process</li><li>File</li><li>Reload</li><li>Shutdown</li></ul></li><li><p><strong>Developer Privileges</strong></p><ul><li>Create</li><li>Alter</li><li>Index</li><li>Drop</li></ul></li><li><p><strong>Special Privileges</strong></p><ul><li><code>Create Temporary Tables</code></li><li><code>Create View</code></li><li><code>Show View</code></li><li><code>Lock Tables</code></li></ul></li><li><p><strong>Replication Privileges</strong></p><ul><li>Replication Client</li><li>Replication Slave</li></ul></li></ul><h3 id=checking--revoking-privileges>Checking & revoking privileges</h3><p>The REVOKE statement removes privileges but does not remove the user account.</p><p>To remove a user account, the DROP USER statement must be used.</p><p>Query the user table in the mysql database to check the privileges of user accounts</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>SELECT</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>user</span>,<span style=color:#007020;font-weight:700>host</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>from</span><span style=color:#bbb> </span>mysql.<span style=color:#007020;font-weight:700>user</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>The SHOW GRANTS statement can be used to check a single user account’s privileges</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>SHOW</span><span style=color:#bbb> </span>GRANTS<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>FOR</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>Revoke privileges from a user with the REVOKE statement by either listing the privileges to revoke or using ALL PRIVILEGES</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>REVOKE</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>SELECT</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>ON</span><span style=color:#bbb> </span>dbname.tablename<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>FROM</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host&#39;</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>REVOKE</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>ALL</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>PRIVILEGES</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>ON</span><span style=color:#bbb> </span>dbname.tablename<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>FROM</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>Confirm that the revoke was successful with SHOW GRANTS</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>SHOW</span><span style=color:#bbb> </span>GRANTS<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>FOR</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=restricting-users>Restricting users</h3><p>User accounts can have a limit set on resource use</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>GRANT</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>SELECT</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>ON</span><span style=color:#bbb> </span>dbname.tablename<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>TO</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;user&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;host&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>WITH</span><span style=color:#bbb> </span>MAX_QUERIES_PER_HOUR<span style=color:#bbb> </span><span style=color:#40a070>20</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>     </span>MAX_CONNECTIONS_PER_HOUR<span style=color:#bbb> </span><span style=color:#40a070>10</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>     </span>MAX_USER_CONNECTIONS<span style=color:#bbb> </span><span style=color:#40a070>2</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>     </span>MAX_UPDATES_PER_HOUR<span style=color:#bbb> </span><span style=color:#40a070>5</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>Resource limit usage is kept in the <code>mysql</code> database</p><p>Resource limit counters reset then the server starts|restarts or when <code>FLUSH USER_RESOURCES</code> is executed</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>FLUSH<span style=color:#bbb> </span>USER_RESOURCES;<span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=removing-users>Removing users</h3><p>Delete users in MariaDB with the <code>DROP USER</code> statement</p><p><code>DROP USER 'user'@'host';</code></p><p>Check for leftover user accounts which still allow access from other hosts</p><p><code>SELECT User,Host from mysql.user WHERE User = 'user';</code></p><h2 id=backing-up-and-restoring-data>Backing up and restoring data</h2><h3 id=basic-types-of-backup-methods>Basic types of backup methods</h3><h4 id=physical-or-binary-backup>Physical or Binary Backup</h4><ul><li>MariaDB Backup, manual data directory copy (after stopping MariaDB daemon), or VM/Cloud/LVM/ZFS snapshots<ul><li>A physical backup typically refers to a copy of the entire on disk database</li><li>Used to mitigate a single or multiple host failure</li><li>Can build replicas quickly</li><li>Quick Full Recovery Time</li><li>Slow to recover single row or table (user error)</li><li>Recovered Only to the Same Storage Engine with the same tablespaces</li></ul></li></ul><h4 id=logical-backup>Logical Backup</h4><ul><li>mariadb-dump, mydumper, <code>SELECT INTO OUTFILE</code><ul><li>Produces SQL files containing data that can regenerate a database</li><li>Easily backup and restore single row, table, or database</li><li>Can segregate schema and data</li><li>Can work across versions and forks</li><li>SQL can be parsed with standard UNIX tools</li><li>Restore process automatically replicated</li><li>Long Full Restore Time</li><li>A SQL dump is independent of Storage Engine, and can be Restored to a different Storage Engine, or Used for Migration</li><li>Process can be Slow and Requires Locks</li></ul></li></ul><h3 id=mariadb-backup>MariaDB backup</h3><p>MariaDB&rsquo;s own backup package (<code>mariabackup</code>) is included since MariaDB 10.1</p><ul><li>Supports MariaDB&rsquo;s features and storage engines</li><li>Supports encryption</li><li>Supports incremental backups</li><li>Also available on Windows</li><li>Command-line compatibility with XtraBackup</li><li>MariaDB Enterprise Backup contains improvements such as less locking</li></ul><h3 id=backing-up-data---mariadb-backup>Backing up data - MariaDB backup</h3><h4 id=full-backups>Full Backups</h4><p>To use MariaDB Backup you need to create a user on your MariaDB Server with RELOAD, LOCK TABLES and REPLICATION CLIENT privileges.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>MariaDB<span style=color:#bbb> </span>[(<span style=color:#007020;font-weight:700>none</span>)]<span style=color:#666>&gt;</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>USER</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;backupuser&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;localhost&#39;</span><span style=color:#bbb> </span>IDENTIFIED<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>BY</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;&lt;password&gt;&#39;</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>MariaDB<span style=color:#bbb> </span>[(<span style=color:#007020;font-weight:700>none</span>)]<span style=color:#666>&gt;</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>GRANT</span><span style=color:#bbb> </span>RELOAD,<span style=color:#bbb> </span>PROCESS,<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>LOCK</span><span style=color:#bbb> </span>TABLES,<span style=color:#bbb> </span>REPLICATION<span style=color:#bbb> </span>CLIENT<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>ON</span><span style=color:#bbb> </span><span style=color:#666>*</span>.<span style=color:#666>*</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>TO</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;backupuser&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;localhost&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>To take a full backup at the OS command-line use:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariabackup --backup --target-dir &lt;backupdir&gt; --user &lt;backupuser&gt; --password &lt;password&gt;</span>
</span></span><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariabackup --prepare --target-dir &lt;backupdir&gt;</span>
</span></span></code></pre></div><h3 id=restoring-data---mariadb-backup>Restoring data - MariaDB backup</h3><h4 id=full-backups-1>Full Backups</h4><p>Working with a full backup taken with MariaDB Backup, you restore the backup into an empty data directory</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariabackup --copy-back --target-dir &lt;backupdir&gt; --datadir &lt;datadir&gt;</span>
</span></span></code></pre></div><p>Afterwards it might be necessary to set the ownership of the data directory contents</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># chown -R mysql:mysql &lt;datadir&gt;</span>
</span></span></code></pre></div><h3 id=backing-up-data---mariadb-dump>Backing up data - mariadb-dump</h3><p>The standard MariaDB logical dump tool copies schema and data to a SQL text file</p><p>To use <code>mariadb-dump</code> you need to create a user on your MariaDB Server with SELECT, RELOAD, LOCK TABLES, REPLICATION CLIENT, SHOW VIEW, EVENT, AND TRIGGER privileges.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>MariaDB<span style=color:#666>&gt;</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>USER</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;backupuser&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;localhost&#39;</span><span style=color:#bbb> </span>IDENTIFIED<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>BY</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;mariadb&#39;</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>MariaDB<span style=color:#666>&gt;</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>GRANT</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>SELECT</span>,<span style=color:#bbb> </span>RELOAD,<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>LOCK</span><span style=color:#bbb> </span>TABLES,<span style=color:#bbb> </span>REPLICATION<span style=color:#bbb> </span>CLIENT,<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>SHOW</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>VIEW</span>,<span style=color:#bbb> </span>EVENT,<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>TRIGGER</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>ON</span><span style=color:#bbb> </span><span style=color:#666>*</span>.<span style=color:#666>*</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>TO</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;backupuser&#39;</span><span style=color:#666>@</span><span style=color:#4070a0>&#39;localhost&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>To take a full backup at the OS command line use:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb-dump -u backupuser -p --all-databases --single-transaction --flush-logs -r /path/to/full-backup-YYYYMMDD.sql</span>
</span></span></code></pre></div><h3 id=restoring-data---mariadb-dump>Restoring data - mariadb-dump</h3><p>Restoring from a logical backup</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb &lt; /path/to/full-backup-YYYYMMDD.sql</span>
</span></span></code></pre></div><p>Or to avoid interpretation by bash:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># mariadb</span>
</span></span><span style=display:flex><span>MariaDB&gt; <span style=color:#007020>source</span> /path/to/full-backup-YYYYMMDD.sql
</span></span></code></pre></div><p>You can also use standard linux tools such as vi or grep to edit or extract the backup.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#60a0b0;font-style:italic># grep city worldbackup.sql</span>
</span></span><span style=display:flex><span>CREATE TABLE <span style=color:#4070a0>`</span>world<span style=color:#4070a0>`</span>.<span style=color:#4070a0>`</span>city<span style=color:#4070a0>`</span> <span style=color:#666>(</span> ...
</span></span></code></pre></div><h2 id=lesson-summary>Lesson summary</h2><ul><li>Discuss MariaDB&rsquo;s client / server architecture</li><li>Gain an understanding of isolation levels and MariaDB&rsquo;s storage engine concept</li><li>Utilize MariaDB connectors and utilities</li><li>Learn basic MariaDB administration tasks relating to server logs, user management, and backing up and restoring data</li></ul><h2 id=lab-exercises>Lab exercises</h2><ul><li>1-1 Verifying the MariaDB Installation</li><li>1-2 Enabling Logging in MariaDB</li><li>1-3 Creating Users in MariaDB</li></ul><hr><p>For academic and non-commercial usage, licensed under CC BY-NC-SA 4.0 by MariaDB plc.</p></div><div class=right-menu><div class=quick-links><a href=https://github.com/MariaDB/mariadb-for-universities/blob/main/mariadb-dev-01-getting-started.md class="icon-link edit-page">View page source</a>
<a href=https://github.com/MariaDB/mariadb-for-universities/edit/main/mariadb-dev-01-getting-started.md class="icon-link view-source">Edit this page</a>
<a href="https://github.com/MariaDB/mariadb-for-universities/issues/new?title=Course%20Material%20issue%20for%20Lesson%201%3a%20Getting%20Started&body=I%20found%20an%20issue%20with%20the%20documentation%20for%20Lesson%201%3a%20Getting%20Started.%0A%0A%0A%0A---%0A%0AThis%20issue%20is%20related%20to%20the%20following%20page%3A%0A%0Ahttps%3a%2f%2funi.mariadb.org%2fdev%2fgetting-started%2f" class="icon-link create-doc">Create material issue</a>
<a href=javascript:void(0) onclick=printSection() class="icon-link print">Print entire section</a></div></div></div><script>function printSection(){const e=document.querySelector(".left-menu"),t=document.querySelector(".right-menu"),n=e.style.display,s=t.style.display;e.style.display="none",t.style.display="none",window.print(),e.style.display=n,t.style.display=s}</script></body></html>