<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>MariaDB for Universities Program: Course Material</title>
<link rel=stylesheet href=/css/main.css><meta property="og:url" content="https://uni.mariadb.org/dba/transactions/"><meta property="og:site_name" content="MariaDB for Universities Program Course Material"><meta property="og:title" content="Lesson 4: Transactions"><meta property="og:description" content="Transactions Learning Objectives Define and describe what transactions are in a database environment Show how to perform transactions and when to use savepoints in MariaDB Explain and compare isolation levels and the types of isolation levels in MariaDB Introduction to Transactions Transactions A transaction is a mechanism for grouping together multiple SQL statements into one atomic operation; an all or nothing proposition
Atomicity
All statements are executed successfully or are cancelled as a unit"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="dba"><meta property="article:published_time" content="2025-04-07T00:00:00+00:00"><meta property="article:modified_time" content="2025-04-07T00:00:00+00:00"></head><body><div class=top-menu><div class=menu-left><a href=/ class=home-link>MariaDB for Universities Program: Course Material</a></div><div class=menu-right><a href=https://mariadb.org>MariaDB Foundation (mariadb.org)</a></div></div><div class=content-wrapper><div class=left-menu><div class=table-of-contents><h2><a href=.>Lesson 4: Transactions</a></h2><nav id=TableOfContents><ul><li><a href=#learning-objectives>Learning Objectives</a></li><li><a href=#introduction-to-transactions>Introduction to Transactions</a><ul><li><a href=#transactions-1>Transactions</a></li><li><a href=#savepoint>Savepoint</a></li><li><a href=#autocommit>Autocommit</a></li><li><a href=#an-example-of-a-transaction>An Example of a Transaction</a></li></ul></li><li><a href=#isolation-levels>Isolation Levels</a><ul><li><a href=#isolation-levels-1>Isolation Levels</a></li><li><a href=#types-of-isolation-levels>Types of Isolation Levels</a></li></ul></li><li><a href=#lesson-summary>Lesson Summary</a></li></ul></nav></div></div><div class=main-content><nav class=breadcrumb><a href=/>MariaDB for Universities Course Material</a>
>
<a href=/dba/>MariaDB DBA Course</a>
> <span class=current>Lesson 4: Transactions</span></nav><h1>Lesson 4: Transactions</h1><h1 id=transactions>Transactions</h1><h2 id=learning-objectives>Learning Objectives</h2><ul><li>Define and describe what transactions are in a database environment</li><li>Show how to perform transactions and when to use savepoints in MariaDB</li><li>Explain and compare isolation levels and the types of isolation levels in MariaDB</li></ul><h2 id=introduction-to-transactions>Introduction to Transactions</h2><h3 id=transactions-1>Transactions</h3><p>A transaction is a mechanism for grouping together multiple SQL statements into one atomic operation; an all or nothing proposition</p><p><strong>Atomicity</strong><br>All statements are executed successfully or are cancelled as a unit</p><p><strong>Consistency</strong><br>A database is in a consistent state when a transaction begins and when a transaction ends</p><p><strong>Isolation</strong><br>One transaction does not affect another</p><p><strong>Durability</strong><br>All changes made by a successfully completed transaction are properly recorded in the database. No changes are lost</p><h3 id=savepoint>Savepoint</h3><p>Using savepoints, you can roll back to certain points within the transaction without terminating the transaction.</p><p>Use the <code>SAVEPOINT</code> statement to set a name for the transaction</p><pre tabindex=0><code>SAVEPOINT savepoint_name;
</code></pre><p>Use the <code>ROLLBACK TO</code> statement to roll back a transaction to the named savepoint without terminating the transaction</p><pre tabindex=0><code>ROLLBACK TO savepoint_name;
</code></pre><p>Use the <code>RELEASE SAVEPOINT</code> statement to remove the specified savepoint from a transaction</p><pre tabindex=0><code>RELEASE SAVEPOINT savepoint_name;
</code></pre><h3 id=autocommit>Autocommit</h3><p>DDL statements, such as <code>CREATE</code> or <code>DROP</code> for databases and <code>CREATE</code>, <code>DROP</code>, or <code>ALTER</code> for tables or stored routines cannot be rolled back.</p><p>By default, autocommit is ON, which means that all individual statements are committed as soon as they are finished unless they are in a <code>START TRANSACTION . . . COMMIT</code> block.</p><p>If autocommit is OFF, you need to explicitly issue a <code>COMMIT</code> statement to commit a transaction</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>COMMIT</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>To disable autocommit execute <code>START TRANSACTION</code>, or <code>BEGIN</code></p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>START</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>TRANSACTION</span>;<span style=color:#bbb>   </span><span style=color:#60a0b0;font-style:italic>/* or BEGIN */</span><span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=an-example-of-a-transaction>An Example of a Transaction</h3><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#666>`</span><span style=color:#007020;font-weight:700>START</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>TRANSACTION</span>;<span style=color:#666>`</span><span style=color:#bbb>  </span><span style=color:#60a0b0;font-style:italic>/* Start transaction with START TRANSACTION or BEGIN */</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span>…</span><span style=color:#bbb>  </span><span style=color:#60a0b0;font-style:italic>/* Perform your SQL statements */</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#666>`</span>SAVEPOINT<span style=color:#bbb> </span>sp1;<span style=color:#666>`</span><span style=color:#bbb>  </span><span style=color:#60a0b0;font-style:italic>/* Set savepoints sp1 */</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span>…</span><span style=color:#bbb>  
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#666>`</span>SAVEPOINT<span style=color:#bbb> </span>sp2;<span style=color:#666>`</span><span style=color:#bbb>  </span><span style=color:#60a0b0;font-style:italic>/* Set savepoints sp2 */</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span>…</span><span style=color:#bbb>  
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#666>`</span>SAVEPOINT<span style=color:#bbb> </span>sp3;<span style=color:#666>`</span><span style=color:#bbb>  </span><span style=color:#60a0b0;font-style:italic>/* Set savepoints sp3 */</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#666>`</span>RELEASE<span style=color:#bbb> </span>SAVEPOINT<span style=color:#bbb> </span>sp2;<span style=color:#666>`</span><span style=color:#bbb>  </span><span style=color:#60a0b0;font-style:italic>/* Deletes savepoint sp2 and all savepoints defined after which includes sp3 */</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#666>`</span><span style=color:#007020;font-weight:700>ROLLBACK</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>TO</span><span style=color:#bbb> </span>sp1;<span style=color:#666>`</span><span style=color:#bbb>  </span><span style=color:#60a0b0;font-style:italic>/* If anything goes wrong, undo only up to some savepoint */</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#666>`</span><span style=color:#007020;font-weight:700>ROLLBACK</span>;<span style=color:#666>`</span><span style=color:#bbb>  </span><span style=color:#60a0b0;font-style:italic>/* If anything goes wrong, undo all changes in the transaction */</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#666>`</span><span style=color:#007020;font-weight:700>COMMIT</span>;<span style=color:#666>`</span><span style=color:#bbb>  </span><span style=color:#60a0b0;font-style:italic>/* Else if everything is successful, commit the changes */</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#60a0b0;font-style:italic>/* End of transaction */</span><span style=color:#bbb>
</span></span></span></code></pre></div><h2 id=isolation-levels>Isolation Levels</h2><h3 id=isolation-levels-1>Isolation Levels</h3><p>When two or more transactions occur at the same time, the isolation level defines the degree at which a transaction is isolated from the resource or data modifications made by other transactions</p><p>The default isolation level is <strong>REPEATABLE-READ</strong></p><p>To change the isolation level, you need to set the <code>tx_isolation</code> variable which is dynamic and has session level scope</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#007020;font-weight:700>SET</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>SESSION</span><span style=color:#bbb> </span>tx_isolation<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#4070a0>&#39;READ-COMMITTED&#39;</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>The <code>transaction_isolation</code> option can be set in the configuration file</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#007020;font-weight:700>[mariadb]</span>
</span></span><span style=display:flex><span><span style=color:#4070a0>transaction_isolation</span> <span style=color:#666>=</span> <span style=color:#4070a0>READ-COMMITTED</span>
</span></span></code></pre></div><h3 id=types-of-isolation-levels>Types of Isolation Levels</h3><p><strong>Read Uncommitted</strong><br>Allows a transaction to see uncommitted changes made by other transactions (<em>dirty read</em>)</p><p><strong>Read Committed</strong><br>Allows a transaction to see changes made by other transactions (different row content or fewer rows due to a <code>DELETE</code>, or rows no longer match due to an <code>UPDATE</code>) only if the changes have been committed (non-repeatable read)</p><p><strong>Repeatable Read</strong><br>Ensures that if a transaction issues the same <code>SELECT</code> twice, no rows vanish or show different content. New rows (phantom rows) can still appear</p><p>Due to the implementation of row locks in InnoDB there are no phantom rows in InnoDB</p><p><strong>Serializable</strong><br>Completely isolates a transaction&rsquo;s effects from other transactions</p><p>In InnoDB this causes read locks after <code>SELECT</code> until <code>COMMIT</code> or <code>ROLLBACK</code> (like <code>WITH LOCK IN SHARE MODE</code>)</p><h2 id=lesson-summary>Lesson Summary</h2><ul><li>Define and describe what transactions are in a database environment</li><li>Show how to perform transactions and when to use savepoints in MariaDB</li><li>Explain and compare isolation levels and the types of isolation levels in MariaDB</li></ul><hr><p>For academic and non-commercial usage, licensed under CC BY-NC-SA 4.0 by MariaDB plc.</p></div><div class=right-menu><div class=quick-links><a href=https://github.com/MariaDB/mariadb-for-universities/blob/main/mariadb-dba-04-transactions.md class="icon-link edit-page">View page source</a>
<a href=https://github.com/MariaDB/mariadb-for-universities/edit/main/mariadb-dba-04-transactions.md class="icon-link view-source">Edit this page</a>
<a href="https://github.com/MariaDB/mariadb-for-universities/issues/new?title=Course%20Material%20issue%20for%20Lesson%204%3a%20Transactions&body=I%20found%20an%20issue%20with%20the%20documentation%20for%20Lesson%204%3a%20Transactions.%0A%0A%0A%0A---%0A%0AThis%20issue%20is%20related%20to%20the%20following%20page%3A%0A%0Ahttps%3a%2f%2funi.mariadb.org%2fdba%2ftransactions%2f" class="icon-link create-doc">Create material issue</a>
<a href=javascript:void(0) onclick=printSection() class="icon-link print">Print entire section</a></div></div></div><script>function printSection(){const e=document.querySelector(".left-menu"),t=document.querySelector(".right-menu"),n=e.style.display,s=t.style.display;e.style.display="none",t.style.display="none",window.print(),e.style.display=n,t.style.display=s}</script></body></html>